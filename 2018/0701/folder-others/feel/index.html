<!DOCTYPE HTML><html lang="zh-CN,en,default"><head><meta charset="utf-8"><meta name="keywords" content="tests,文章页,blog"><meta name="description" content="这个博客，是千辛万苦搭起来的。"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1.1,user-scalable=no"><meta name="renderer" content="webkit|ie-stand|ie-comp"><meta name="mobile-web-app-capable" content="yes"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta http-equiv="Access-Control-Allow-Origin" content="*"><meta name="color-scheme" content="light dark"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#c2185b"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#470024"><meta name="”apple-mobile-web-app-status-bar-style”" content="#c2185b"><meta name="”msapplication-navbutton-color”" content="#c2185b"><meta name="msapplication-TileColor" content="#c2185b"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="x5-orientation" content="portrait"><meta name="x5-fullscreen" content="true"><meta name="x5-page-mode" content="app"><meta name="full-screen" content="yes"><meta name="browsermode" content="application"><meta name="mobile-web-app-capable" content="yes"><meta itemprop="name" content="关于Hexo-Theme-Matery主题的一些个性化修改 | lzc的小站"><meta itemprop="image" content="/webicon.png"><meta name="description" itemprop="description" content="这个博客，是千辛万苦搭起来的。"><meta name="application-name" content="lzc的小站"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>关于Hexo-Theme-Matery主题的一些个性化修改 | lzc的小站</title><link rel="icon" type="image/png" href="/webicon.png"><link rel="apple-touch-icon" href="/webicon.png"><link rel="manifest" href="/pwa.json"><link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.1.1/css/all.min.css" rel="stylesheet"><link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css"><link rel="stylesheet" type="text/css" href="/libs/aos/aos.css"><link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css"><link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css"><link rel="stylesheet" type="text/css" href="/css/matery.css"><link rel="stylesheet" type="text/css" href="/css/load-dot.css"><script src="/libs/sweetalert/sweetalert2.9.js"></script><link rel="stylesheet" type="text/css" href="/libs/sweetalert/sweetalert2.9.css"><link rel="stylesheet" type="text/css" href="/libs/valine/valine-origin.css"><link rel="stylesheet" type="text/css" href="/css/my.css"><link rel="stylesheet" type="text/css" href="/css/block.css"><link rel="stylesheet" type="text/css" href="/libs/codeBlock/prism-one-light.css"><link rel="stylesheet" type="text/css" href="/libs/codeBlock/prism-tomorrow.css"><link rel="stylesheet" type="text/css" href="/css/matery-code.css"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" media="all"><script src="https://cdn.bootcdn.net/ajax/libs/jquery/2.2.0/jquery.min.js"></script><script src="/libs/aos/aos.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script><script src="/js/matery.js"></script><script src="/js/ssl.js"></script><script src="/js/password.js"></script><script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script><meta name="theme-color" content="#db5945"><link rel="stylesheet" type="text/css" href="/css/matery-dark.css"><script data-ad-client="ca-pub-8673415232433149" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css"><meta name="generator" content="Hexo 6.1.0"><link rel="alternate" href="/rss.xml" title="lzc的小站" type="application/rss+xml">
</head><script>navigator.serviceWorker&&navigator.serviceWorker.register("/sw.js",{scope:"/"})</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?7c5ac35898a8b94cc11e0f2c73d5c644";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script type="text/javascript" src="https://cdn.bootcdn.net/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"></script><script>$('[data-fancybox="images"]').fancybox({thumbs:{autoStart:!0}})</script><body><style>body{overflow:auto}</style><header class="navbar-fixed"><nav id="headNav" class="bg-color nav-transparent"><div id="navContainer" class="container"><div class="nav-wrapper"><div id="GrandmotherContainer"><div class="brand-logo" id="MotherContainer"><div id="Container1"><a href="/" class="waves-effect waves-light"><img src="/medias/logo.svg" class="logo-img hide-on-small-only"> <span class="logo-span">lzc的小站</span></a></div><div id="Container2"><span class="logo-span">关于Hexo-Theme-Matery主题的一些个性化修改</span></div></div></div><a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a><ul class="right nav-menu"><li class="hide-on-med-and-down nav-item"><a href="/" class="waves-effect waves-light"><i class="fas fa-home"></i> <span>首页</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/tags/" class="waves-effect waves-light"><i class="fas fa-hashtag"></i> <span>标签</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/categories/" class="waves-effect waves-light"><i class="fas fa-atom"></i> <span>专栏</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/archives/" class="waves-effect waves-light"><i class="fas fa-archive"></i> <span>时间轴</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/about/" class="waves-effect waves-light"><i class="fas fa-info-circle"></i> <span>关于</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/friends/" class="waves-effect waves-light"><i class="fas fa-pen-nib"></i> <span>作者</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/tools/" class="waves-effect waves-light"><i class="fas fa-tools"></i> <span>工具箱</span></a></li><li><a id="toggleSearch" href="#searchModal" class="modal-trigger waves-effect waves-light"><i id="searchIcon" class="fa-solid fa-magnifying-glass" title="搜索"></i></a></li></ul><div id="mobile-nav" class="side-nav sidenav"><div class="mobile-head bg-color"><img src="/medias/logo.svg" class="logo-img circle responsive-img"><div class="logo-name">lzc的小站</div><div class="logo-desc">愿一切顺利，也常有诗意</div></div><ul class="menu-list mobile-menu-list"><li class="m-nav-item"><a href="/" class="waves-effect waves-light"><i class="fas fa-home"></i> 首页</a></li><li class="m-nav-item"><a href="/tags/" class="waves-effect waves-light"><i class="fas fa-hashtag"></i> 标签</a></li><li class="m-nav-item"><a href="/categories/" class="waves-effect waves-light"><i class="fas fa-atom"></i> 专栏</a></li><li class="m-nav-item"><a href="/archives/" class="waves-effect waves-light"><i class="fas fa-archive"></i> 时间轴</a></li><li class="m-nav-item"><a href="/about/" class="waves-effect waves-light"><i class="fas fa-info-circle"></i> 关于</a></li><li class="m-nav-item"><a href="/friends/" class="waves-effect waves-light"><i class="fas fa-pen-nib"></i> 作者</a></li><li class="m-nav-item"><a href="/tools/" class="waves-effect waves-light"><i class="fas fa-tools"></i> 工具箱</a></li></ul></div></div></div></nav></header><script>$(document).ready((function(){if($(window).width()<=600&&$("#Container2").length>0){var n=0,o=0;$("#Container1").css("top","0px"),$("#Container2").css("top","40px"),$("#Container2").css("display","block"),$(window).scroll((function(t){var i=$(this).scrollTop(),e=i-n;i>400&&(e>10&&0==o&&($("#MotherContainer").animate({top:"-=40px"}),o=1),e<-10&&1==o&&($("#MotherContainer").animate({top:"+=40px"}),o=0)),setTimeout((function(){n=i}),0)}))}else $("#Container2").css("display","none")}))</script><script>$((function(){/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)&&$(".bg-cover").css("background-attachment","scroll")}))</script><div class="post-cover bg-cover" style="background-image:url(https://i.loli.net/2019/01/27/5c4dd0c84f583.png)"><div class="container"><div class="row"><div class="col s12 m12 l12"><div class="brand"><div class="description center-align post-title" id="PostTitle">关于Hexo-Theme-Matery主题的一些个性化修改</div></div></div></div></div></div><main class="post-container content"><link rel="stylesheet" href="/libs/tocbot/tocbot.css"><link rel="stylesheet" href="/css/matery-toc.css"><div class="row"><div class="col s12 m12 l9"><div id="artDetail"><div class="card"><div class="card-content article-info"><div class="row tag-cate"><div class="text-color" align="center" style="font-size:large"><span id="PostAuthor"><i class="far fa-square"></i> lzctuhao</span></div><br><div class="col s6"><div class="post-cate"><a href="/tags/tests/" class="post-tag" target="_blank"><i class="fas fa-hashtag"></i>tests</a></div></div><div class="col s6 right-align"></div></div><div class="post-info"><div class="post-date info-break-policy"><i class="fa-regular fa-calendar-minus"></i>2018-07-01</div><div class="info-break-policy"><i class="fa-regular fa-file-word"></i>文章字数: 1.4k</div><div class="info-break-policy"><i class="fa-regular fa-clock"></i>阅读时长: 5 分</div><div class="info-break-policy"></div></div></div><hr class="clearfix"><div class="card-content article-card-content"><div id="articleContent"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>最近利用Hexo搭建博客，网上的大量文献都是关于Next主题的配置与自定义修改的，却鲜有人写关于好看的<a href="https://github.com/blinkfox/hexo-theme-matery">hexo-theme-matery</a>的。hexo-theme-matery这么好看的主题居然没被很多人发现…</p><p>在这里记录一下自己对hexo-theme-matery的更多自定义修改：（<strong>感谢作者<em>运用规范的代码</em>写出如此优秀的主题。</strong>）</p><p>能在主题文件<code>/themes/hexo-theme-matery/_config.yml</code>中修改的配置，我就不多说了。</p><h1 id="修改-高亮"><a href="#修改-高亮" class="headerlink" title="修改==高亮"></a>修改<code>==</code>高亮</h1><p>除Typora外的所有md编辑器，包括hexo在内，均不支持<code>==高亮内容==</code>的语法。可对文章用正则替换：</p><p>用vscode把<code>(==)(.*)(==)</code>替换为<code>&lt;mark&gt;$2&lt;/mark&gt;</code>。（需开启正则匹配）</p><h1 id="更改Hexo渲染引擎"><a href="#更改Hexo渲染引擎" class="headerlink" title="更改Hexo渲染引擎"></a>更改Hexo渲染引擎</h1><p>Mathjax公式的下划线<code>_</code>会与md语法冲突，可替换渲染引擎解决。</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">npm un hexo<span class="token operator">-</span>renderer<span class="token operator">-</span>marked <span class="token operator">--</span>save
npm i hexo<span class="token operator">-</span>renderer<span class="token operator">-</span>kramed <span class="token operator">--</span>save<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>进入<code>node_modules\kramed\lib\rules\inline.js</code>，修改第11行escape变量的值：</p><pre class="line-numbers language-js" data-language="js"><code class="language-js">修改前：escape<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\\([\\`*&#123;&#125;\[\]()#$+\-.!_>])</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
修改后：escape<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\\([`*\[\]()#$+\-.!_>])</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>同时，把第20行的<code>em</code>变量也做相应的修改：</p><pre class="line-numbers language-js" data-language="js"><code class="language-js">修改前：em<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
修改后：em<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\*((?:\*\*|[\s\S])+?)\*(?!\*)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h1 id="修改摘要-summary-在“前一篇-后一篇”卡片中”失效”的问题"><a href="#修改摘要-summary-在“前一篇-后一篇”卡片中”失效”的问题" class="headerlink" title="修改摘要(summary)在“前一篇/后一篇”卡片中”失效”的问题"></a>修改摘要(summary)在“前一篇/后一篇”卡片中”失效”的问题</h1><p>matery的文章目录是卡片式的。<br>在首页，若文章有摘要，则会显示摘要(summary)，若没有才会显示文章的前70个字。<br>但是在打开其中一篇文章时，最底部的“前一篇”和“后一篇”文章的卡片上却直接显示文章的前120个字，不论前/后一篇文章有没有摘要。我做出如下更改，使得在“前一篇”和“后一篇”文章的卡片上也同样显示摘要。<br>对<code>/themes/hexo-theme-matery/layout/_partial/prev-next.ejs</code>文件作如下更改：</p><ul><li>第41行左右，<code>&lt;div class=&quot;summary&quot;&gt;...&lt;/div&gt;</code>的那行改成以下几行：<pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>summary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span>page<span class="token punctuation">.</span>prev<span class="token punctuation">.</span>summary <span class="token operator">&amp;&amp;</span> page<span class="token punctuation">.</span>prev<span class="token punctuation">.</span>summary<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>
        <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> page<span class="token punctuation">.</span>prev<span class="token punctuation">.</span>summary </span><span class="token delimiter punctuation">%></span></span>
    <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>
        <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">strip_html</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span>prev<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span>
    <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>第104行左右，<code>&lt;div class=&quot;summary&quot;&gt;...&lt;/div&gt;</code>的那行改成以下几行：<pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>summary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span>page<span class="token punctuation">.</span>summary <span class="token operator">&amp;&amp;</span> page<span class="token punctuation">.</span>summary<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>
        <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> page<span class="token punctuation">.</span>summary </span><span class="token delimiter punctuation">%></span></span>
    <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>
        <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">strip_html</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span>
    <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>第168行左右，<code>&lt;div class=&quot;summary&quot;&gt;...&lt;/div&gt;</code>的那行改成以下几行：<pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>summary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span>page<span class="token punctuation">.</span>next<span class="token punctuation">.</span>summary <span class="token operator">&amp;&amp;</span> page<span class="token punctuation">.</span>next<span class="token punctuation">.</span>summary<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>
        <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> page<span class="token punctuation">.</span>next<span class="token punctuation">.</span>summary </span><span class="token delimiter punctuation">%></span></span>
    <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>
        <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">strip_html</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span>next<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span>
    <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>第230行左右，<code>&lt;div class=&quot;summary&quot;&gt;...&lt;/div&gt;</code>的那行改成以下几行：<pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>summary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span>page<span class="token punctuation">.</span>summary <span class="token operator">&amp;&amp;</span> page<span class="token punctuation">.</span>summary<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>
        <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> page<span class="token punctuation">.</span>summary </span><span class="token delimiter punctuation">%></span></span>
    <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>
        <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">strip_html</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span>
    <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h1 id="修改配色"><a href="#修改配色" class="headerlink" title="修改配色"></a>修改配色</h1><p>原来的主题虽然很好看，但是没有一个统一的主题色。可在<code>/themes/hexo-theme-matery/source/css/matery.css</code>中修改标题栏、菜单栏、各种标签背景的颜色，使主题颜色为Material的粉红色。感谢<a href="https://www.materialpalette.com/colors">Material Design Colours</a>提供的配色方案。</p><h1 id="修改head-ejs和footer-ejs，增加百度统计和Google-Adsense。"><a href="#修改head-ejs和footer-ejs，增加百度统计和Google-Adsense。" class="headerlink" title="修改head.ejs和footer.ejs，增加百度统计和Google Adsense。"></a>修改<code>head.ejs</code>和<code>footer.ejs</code>，增加百度统计和Google Adsense。</h1><h1 id="修改首页subtitle，使之显示动态诗词"><a href="#修改首页subtitle，使之显示动态诗词" class="headerlink" title="修改首页subtitle，使之显示动态诗词"></a>修改首页subtitle，使之显示动态诗词</h1><p>Hexo 和 matery 主题的subtitle只支持纯文本，目前网上还没有关于动态subtitle的解决方案。作为只接触js基础的我来说，实在难搞。好在网上有<a href="https://blog.csdn.net/github_37360787/article/details/82982723">关于ejs常用标签的文章</a>，使得几经尝试终于把ejs修改正确。<br>Mark一下Solution：</p><ul><li>我们采用<a href="https://www.jinrishici.com/">今日诗词</a>的每日一句；</li><li><code>/themes/hexo-theme-matery/layout/_partial/bg-cover.ejs</code> line 16 or 17：<br>把<code>&lt;%# config.description %&gt;</code>改为<code>&lt;%- &#39;&lt;span id=&quot;jinrishici-sentence&quot;&gt;正在加载今日诗词....&lt;/span&gt;&#39; %&gt;</code></li><li>同时在<code>/themes/hexo-theme-matery/layout/_partial/head.ejs</code>增加代码<code>&lt;script src=&quot;https://sdk.jinrishici.com/v2/browser/jinrishici.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</code></li></ul><p>如果要弃用动态诗词，直接改回原文件即可。</p><h1 id="修改公告-dream一栏-里的每日一句"><a href="#修改公告-dream一栏-里的每日一句" class="headerlink" title="修改公告(dream一栏)里的每日一句"></a>修改公告(dream一栏)里的每日一句</h1><p>首页dream公告栏是matery主题的特色，但同样只支持纯文本。我用同样的方法修改，使之显示<a href="http://hitokoto.cn/">“一言”</a>的每日一句-小说类型。<br>Mark一下Solution：</p><ul><li><code>/themes/hexo-theme-matery/layout/index.ejx</code> line 16改为 <code>&lt;i class=&quot;fa fa-volume-up fa-lg fa-fw text-color&quot;&gt;&lt;/i&gt; &lt;%- &#39;&lt;span id=&quot;hitokoto&quot;&gt;一言API请求超时。请稍后重试。&lt;/span&gt; （来源：一言API）&#39; %&gt;</code></li><li><p>同时在<code>/themes/hexo-theme-matery/layout/_partial/head.ejs</code>增加代码：</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://v1.hitokoto.cn/?c=d&amp;encode=js&amp;select=%23hitokoto<span class="token punctuation">"</span></span> <span class="token attr-name">defer</span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul><p>如果要弃用动态诗词，直接改回原文件即可。</p><h1 id="增加在文章页显示作者名的功能"><a href="#增加在文章页显示作者名的功能" class="headerlink" title="增加在文章页显示作者名的功能"></a>增加在文章页显示作者名的功能</h1><p>原来只会在文章卡片上显示作者名（并且是在没有分类的情况下），在文章内容页没有显示作者名。作如下修改使得在文章页显示：<br>在<code>post-detail.ejs</code>第37行左右，<strong>增加</strong>下列代码：</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text-color<span class="token punctuation">"</span></span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>center</span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token style language-css"><span class="token property">font-size</span><span class="token punctuation">:</span>large</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>
    <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span>page<span class="token punctuation">.</span>author <span class="token operator">&amp;&amp;</span> page<span class="token punctuation">.</span>author<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>far fa-square<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span> <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> page<span class="token punctuation">.</span>author </span><span class="token delimiter punctuation">%></span></span>
    <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>far fa-square<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span> <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> config<span class="token punctuation">.</span>author </span><span class="token delimiter punctuation">%></span></span>
    <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="首页增加音乐"><a href="#首页增加音乐" class="headerlink" title="首页增加音乐"></a>首页增加<a href="https://github.com/blinkfox/hexo-theme-matery/commit/35b20eba062b322695607306da7c1c1cd9ad09e8">音乐</a></h1><p>并显示乐曲数目</p><h1 id="添加HTTPS"><a href="#添加HTTPS" class="headerlink" title="添加HTTPS"></a>添加<a href="https://blog.csdn.net/u011244202/article/details/57106544">HTTPS</a></h1><h1 id="About页修改css"><a href="#About页修改css" class="headerlink" title="About页修改css"></a>About页修改css</h1><p>使得两端对齐，并增加引言出处选项。</p><p>以上只是一些小改动。还有更多的自定义（如设置标签页的标签顺序等）要做。</p><p>由lzctuhao原创，转载请标明出处。</p></div><hr><div id="reward"><a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a><div id="rewardModal" class="modal"><div class="modal-content"><a class="close modal-close"><i class="fas fa-times"></i></a><h4 class="reward-title">感谢您的赏识</h4><div class="reward-content"><div class="reward-tabs"><ul class="tabs row"><li class="tab wechat-tab waves-effect waves-light"><a class="active" href="#wechat">微信</a></li><li class="tab alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li><li class="tab alihongbao-tab waves-effect waves-light"><a href="#alihongbao">看广告</a></li></ul><div id="wechat"><img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码"></div><div id="alipay"><p>建议先扫红包码。</p><img src="/medias/reward/alihongbao.png" class="reward-img" alt="支付宝红包码"> <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码"></div><div id="alihongbao"><p><a onclick="ad2345()">关于广告</a></p></div></div><a href="/reward.html" style="padding-bottom:15px">查看赞赏及支出记录</a></div></div></div></div><script>$((function(){$(".tabs").tabs()}))</script><link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css"><div id="article-share"><div class="social-share" data-disabled="qzone, qq, weibo, douban"></div></div><script src="/libs/share/js/social-share.min.js"></script><script>window.onload=function(){/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)&&$("#article-share").hide()}</script><div class="reprint"><p><span class="reprint-tip"><i class="fa fa-exclamation-circle"></i> 转载请注明: </span><a href="https://lzc2002.tk" class="b-link-green">lzc的小站</a> <i class="fa fa-angle-right fa-lg fa-fw text-color"></i> <a href="/2018/0701/folder-others/feel/" class="b-link-green">关于Hexo-Theme-Matery主题的一些个性化修改</a></p></div></div></div><link rel="stylesheet" href="/libs/valine/valine-my.css" type="text/css"><div class="card valine-card article-card-content" style="margin-top:auto" data-aos="fade-up"><div style="padding:1px 0;margin:2px;overflow:hidden"><h3 id="comments" style="padding-top:158px;margin:-126px 0 5px 0">发表您的看法</h3><div id="vcomments" class="card-content"><b>加载失败，请刷新页面。若该问题持续出现，则可能是评论区被禁用。</b></div></div></div><script src="/libs/valine/av-min.js"></script><script src="/libs/valine/Valine.min.js"></script><script>let placeholdertext;placeholdertext="推心置腹的谈话就是心灵的展示。——温·卡维林\n（本评论区无需登录，友善的评论是交流的起点！）",new Valine({el:"#vcomments",appId:"3yz9VMMFTU7t2AjXwqOzRtJK-MdYXbMMI",appKey:"yWPKu7eizq6iQgRWuBlpRyPa",meta:["nick","mail"],visitor:!0,recordIP:!0,avatar:"mp",pageSize:"10",lang:"en",placeholder:placeholdertext,enableQQ:"true",lang:"zh-CN"})</script><article id="prenext-posts" class="prev-next articles"><div class="row article-row"><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge left-badge text-color"><i class="fa fa-chevron-left"></i>&nbsp;上一篇</div><div class="card"><a href="/2018/0702/folder-others/yaml-basic/"><div class="card-image"><img src="https://s2.ax1x.com/2019/03/10/A9rYB4.jpg" class="responsive-img" alt="YAML最最基础语法"> <span class="card-title">YAML最最基础语法</span></div></a><div class="card-content article-content"><div class="summary">YAML最最基础语法，map和list</div><div class="publish-info"><span class="publish-date"><i class="fa fa-user fa-fw"></i> lzctuhao </span><span class="publish-author"><a href="/tags/Code/" class="post-tag" target="_blank"><i class="fas fa-hashtag"></i>Code</a></span></div></div></div></div><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge right-badge text-color">下一篇&nbsp;<i class="fa fa-chevron-right"></i></div><div class="card"><a href="/2018/0630/folder-others/welcome/"><div class="card-image"><img src="/covers/welcome.jpg" class="responsive-img" alt="阅读指南"> <span class="card-title">阅读指南</span></div></a><div class="card-content article-content"><div class="summary">这个网站有什么值得关注的地方？</div><div class="publish-info"><span class="publish-date"><i class="fa fa-user fa-fw"></i> lzctuhao </span><span class="publish-author"><a href="/tags/tests/" class="post-tag" target="_blank"><i class="fas fa-hashtag"></i>tests</a></span></div></div></div></div></div></article></div><script>$("#articleContent").on("copy",(function(e){if(void 0!==window.getSelection){var n=window.getSelection();if(!((""+n).length<Number.parseInt("120"))){var t=document.getElementsByTagName("body")[0],o=document.createElement("div");o.style.position="absolute",o.style.left="-99999px",t.appendChild(o),o.appendChild(n.getRangeAt(0).cloneContents()),"CODE"===n.getRangeAt(0).commonAncestorContainer.nodeName&&(o.innerHTML="<pre>"+o.innerHTML+"</pre>");var i=document.location.href;o.innerHTML+='<br /><p>来源: lzc的小站</p><p>作者: lzctuhao</p><p>链接: <a href="'+i+'">'+i+"</a></p><p>本文章著作权归作者所有，任何形式的转载都请注明出处。</p>",n.selectAllChildren(o),window.setTimeout((function(){t.removeChild(o)}),200)}}}))</script><script>$(".col.s6").css("width","100%")</script><script src="/libs/s2t/jquery.s2t.js"></script><script type="text/javascript" src="/libs/codeBlock/codeBlockFunction.js"></script><script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script><script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script><script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script><style type="text/css">code[class*=language-],pre[class*=language-]{white-space:pre!important}</style><script>var info,imglk;author="lzctuhao",url1="https://zh.wikimirror.xyz//api/rest_v1/page/summary/"+author,$.getJSON(url1,(function(o){imglk=o.originalimage?o.originalimage.source:"",info=o.extract,info=$.t2s(info),console.log(url1),console.log(info),info&&info.length>0?$("#PostAuthor .far.fa-square").attr("class","fa fa-info-circle"):console.log("作者信息为空！")})),$("#PostAuthor").click((function(){info&&info.length>0&&Swal.fire({html:'<h2 style="color:var(--bgcolor)">lzctuhao</h2><p class="articleContent"style="font-weight:initial;text-indent:2em">'+info+"</p>",showCloseButton:!0,closeButtonHtml:'<i class="fa fa-times" aria-hidden="true"></i>',showConfirmButton:!1,footer:'<a href="https://zh.wikimirror.xyz//wiki/lzctuhao">了解更多</a>'})}))</script><style>.material-tooltip{text-align:left;max-width:90%}</style></div><div class="col l3 hide-on-med-and-down" id="pagetoc"><div class="toc-widget"><div class="toc-title"><i class="fa fa-list-alt"></i>&nbsp;&nbsp;目录</div><div id="toc-content" class="toc-content">请刷新页面</div></div></div></div><div id="toc-content-mobile-father" class="toc-widget"><div id="toc-content-mobile" class="toctriangle toc-content"></div></div><script src="/libs/tocbot/tocbot.min.js"></script><script src="/js/toc.js"></script><script>$((function(){$(window).width()>=993?tocbot.init({tocSelector:"#toc-content",contentSelector:"#articleContent",headingSelector:"h1, h2, h3"}):tocbot.init({tocSelector:"#toc-content-mobile",contentSelector:"#articleContent",headingSelector:"h1, h2, h3"});let t=0;$(".toc-content a").each((function(){$(this).attr("href","#toc-heading-"+ ++t)})),t=0,$("#articleContent").children("h1, h2, h3").each((function(){$(this).attr("id","toc-heading-"+ ++t)}));let o=parseInt(.4*$(window).height()-64),e=$(".toc-widget");$(window).scroll((function(){$(window).scrollTop()>o?e.addClass("toc-fixed"):e.removeClass("toc-fixed")})),$("#floating-toc-btn-mobile").click((function(){$("#toc-content-mobile-father").toggle("fast")})),$(".toc-list-item a").click((function(){$("#toc-content-mobile-father").hide("slow")}))}))</script><div id="floating-toc-btn" onclick="toggletoc()"><a class="btn-floating btn-large bg-color waves-effect waves-light"><i class="fa fa-list"></i></a></div><div id="floating-toc-btn-mobile"><a class="btn-floating btn-large bg-color waves-effect waves-light"><i class="fa fa-list"></i></a></div></main><footer class="page-footer bg-color"><div class="container row center-align"><div class="col s12 m8 l8 copy-right"><b><a class="footerCDN" href="https://lzc.vercel.app/2018/0701/folder-others/feel/">线路1(推荐) </a></b><a class="footerCDN" href="https://gh.lzc2002.tk/2018/0701/folder-others/feel/">线路2 </a><a class="footerCDN" href="https://lzc2002.tk/2018/0701/folder-others/feel/">线路3 </a><a class="footerCDN" href="https://lzctuhao.github.io/2018/0701/folder-others/feel/">线路4</a><br>本站由 <b>lzctuhao</b> 基于 Hexo 的 hexo-theme-matery 主题搭建.<br></div><div class="col s12 m4 l4 social-link social-statis"><a href="mailto:lzctuhao@163.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50"><i class="fas fa-envelope"></i> </a><a href="https://twitter.com/lzctuhao" class="tooltipped" target="_blank" data-tooltip="Twitter ID: lzctuhao" data-position="top" data-delay="50"><i class="fab fa-twitter"></i> </a><a href="/rss.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50"><i class="fa fa-rss"></i> </a><a href="javascript:;" class="tooltipped" data-tooltip="微信公众号：<b>lzc的碎碎念</b>" data-position="top" data-delay="50" onclick="wechat_account()"><i class="fab fa-weixin"></i></a></div></div></footer><div id="searchModal" class="modal"><div class="modal-content"><div class="search-header"><span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span> <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字" class="search-input"></div><div id="searchLoading"><img src="/medias/loading.svg" attribute="loading"><div>搜索索引正在加载中</div></div><div id="searchResult"></div></div></div><script src="/js/search.js"></script><div id="backTop" class="top-scroll"><a class="btn-floating btn-large waves-effect waves-light" href="#!"><i class="fas fa-angle-double-up"></i></a></div><script src="/libs/masonry/masonry.pkgd.min.js"></script><script src="/libs/scrollprogress/scrollProgress.min.js"></script><script src="/libs/lightGallery/js/lightgallery-all.min.js"></script><script async src="/libs/others/busuanzi.pure.mini.js"></script></body></html>