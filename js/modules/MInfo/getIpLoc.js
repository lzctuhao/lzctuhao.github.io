(function(t){t.getIpLoc=async function(t=null){const n="4WGBZ-ZAWRX-CFU43-TPU2J-ZHK6O-OIBNR";const o="687a87c0dbde4cf69ced37d54c496325";const c=`https://apis.map.qq.com/ws/location/v1/ip?key=${n}`+(t?`&ip=${t}`:"");try{const t=await fetch(c);const n=await t.json();if(n.status===0&&n.result?.ad_info?.nation==="中国"){const t=n.result.ad_info;const o=t.nation!=="中国"?t.nation:t.adcode+t.province+(t.province===t.city?"":t.city)+t.district;return[n.result.ip,o]}}catch(t){}const i=`https://api.ipgeolocation.io/ipgeo?apiKey=${o}`+(t?`&ip=${t}`:"");try{const t=await fetch(i);const n=await t.json();const o=`${n.city}, ${n.country_name}, ${n.continent_name} (${n.isp})`;return[n.ip,o]}catch(t){console.error("IP lookup failed:",t);return[null,null]}}})(window.MInfo=window.MInfo||{});