function example(e){$("#inputarea").val(e);e=formula_formating(e);$("#result").val(e)}function format_work(){str=$("#inputarea").val();str=formula_formating(str);$("#result").val(str)}function unformat_work(){str=$("#inputarea").val();str=unformula_formating(str);$("#result").val(str)}function insert(e,r=0){$("#result").insertAtCaret(e,r);$.cookie("data",$("#inputarea").val())}function copy(e){let r=$.copy(e);if(r){Swal.fire({icon:"success",title:"复制成功",showConfirmButton:false,timer:2e3})}else{Swal.fire({icon:"error",title:"复制失败",html:"请手动复制您的专属代码：<code>"+oid+"</code>"})}}function formula_formating(e){function r(e){let r={2:"₂",3:"₃",4:"₄",5:"₅",6:"₆",7:"₇",8:"₈",9:"₉"};if(r[e]){return r[e]}else{return"sub"}}function t(e){let r={2:"²",3:"³",4:"⁴",5:"⁵",6:"⁶",7:"⁷",8:"⁸",9:"⁹","+":"⁺","-":"⁻"};if(r[e]){return r[e]}else{return"&"}}let a,n;e=e.replace(/ */g,"");const l="Mg,Ca,Ba,Al,Fe,Zn,Cu,Cr,Mn,Pb,Sn,Pt,Hg,Ag,Au,Ti";a="(?<="+l.replace(/,/g,"|")+")[2-9](?=\\+)";n=new RegExp(a,"gi");e=e.replace(n,(e=>t(e)));const o="NH(?=[3-4]),NO(?=[2-3]),SO(?=[2-4]),IO(?=3),OH,CN,CH(?=[2-4]),CO,EDTA,XO,EBT";a=o.replace(/,/g,"|");n=new RegExp(a,"gi");e=e.replace(n,(e=>e.toUpperCase()));const i=l+",Li,Na,Rb,Cs,Cl,Br,Be,Si";a=i.replace(/,/g,"|");n=new RegExp(a,"gi");e=e.replace(n,(e=>e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()));a="(?<="+i.replace(/,/g,"|")+")[a-z]";n=new RegExp(a,"g");e=e.replace(n,(e=>e.toUpperCase()));n=/((\-|\+)(?=\+|\=|[\u4e00-\u9fa5])|(\-|\+$))/g;e=e.replace(n,(e=>t(e)));n=/(?<=[a-zA-Z]|\))[2-9]/g;e=e.replace(n,(e=>r(e)));n=/[2-9](?=⁺|⁻)/g;e=e.replace(n,(e=>t(e)));e=e.replace(/\+/g," + ");e=e.replace(/=/g," = ");e=e[0].toUpperCase()+e.substr(1);e=e.replace(/(?<=[^a-zA-Z])[a-df-z]/g,(e=>e.toUpperCase()));return e}function unformula_formating(e){let r={"²":"2","³":"3","⁴":"4","⁵":"5","⁶":"6","⁷":"7","⁸":"8","⁹":"9","⁺":"+","⁻":"-","₂":"2","₃":"3","₄":"4","₅":"5","₆":"6","₇":"7","₈":"8","₉":"9"};let t="("+Object.keys(r).map((e=>"\\"+e)).join("|")+")";let a=new RegExp(t,"g");e=e.replace(a,(e=>r[e]));return e}