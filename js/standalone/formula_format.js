function example(e){$("#inputarea").val(e);e=formula_formating(e);$("#result").val(e)}function format_work(){str=$("#inputarea").val();str=formula_formating(str);$("#result").val(str)}function unformat_work(){str=$("#inputarea").val();str=unformula_formating(str);$("#result").val(str)}function formula_formating(e){function r(e){let r={2:"₂",3:"₃",4:"₄",5:"₅",6:"₆",7:"₇",8:"₈",9:"₉"};if(r[e]){return r[e]}else{return"sub"}}function a(e){let r={2:"²",3:"³",4:"⁴",5:"⁵",6:"⁶",7:"⁷",8:"⁸",9:"⁹","+":"⁺","-":"⁻"};if(r[e]){return r[e]}else{return"&"}}let t,l;e=e.replace(/ */g,"");let n="Mg,Ca,Ba,Al,Fe,Zn,Cu,Cr,Mn";t="(?<="+n.replace(/,/g,"|")+")[2-9](?=\\+)";l=new RegExp(t,"gi");e=e.replace(l,(e=>a(e)));t=n.replace(/,/g,"|");l=new RegExp(t,"gi");e=e.replace(l,(e=>e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()));t="(?<="+n.replace(/,/g,"|")+")[a-z]";l=new RegExp(t,"g");e=e.replace(l,(e=>e.toUpperCase()));l=/(\-|\+)(?=\+|\=|[\u4e00-\u9fa5])/g;e=e.replace(l,(e=>a(e)));l=/(?<=[a-zA-Z]|\))[2-9]/g;e=e.replace(l,(e=>r(e)));l=/[2-9](?=⁺|⁻)/g;e=e.replace(l,(e=>a(e)));e=e.replace(/\+/g," + ");e=e.replace(/=/g," = ");e=e[0].toUpperCase()+e.substr(1);e=e.replace(/(?<=[^a-zA-Z])[a-z]/g,(e=>e.toUpperCase()));return e}function unformula_formating(e){let r={"²":"2","³":"3","⁴":"4","⁵":"5","⁶":"6","⁷":"7","⁸":"8","⁹":"9","⁺":"+","⁻":"-","₂":"2","₃":"3","₄":"4","₅":"5","₆":"6","₇":"7","₈":"8","₉":"9"};let a="("+Object.keys(r).map((e=>"\\"+e)).join("|")+")";let t=new RegExp(a,"g");e=e.replace(t,(e=>r[e]));return e}