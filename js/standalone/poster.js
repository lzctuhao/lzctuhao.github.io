$(document).ready((function(){$(".collapsible").collapsible();$("select").formSelect();$(".pic-eg").on("click",(function(){let e=$(this).css("background-image");$("#result,#toppic").css("background-image",e);document.getElementById("pic").src=css2url(e)}))}));function css2url(e){var t=e;var n=/url\((.*)\)/;var r="";try{r=n.exec(t)[1].trim();r=r.replace(/["']/g,"")}catch(e){r="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"}return r}function text_change(e,t){let n=`<p>${e}</p>`;$(`#${t}`).html(n.replace(/\n/g,"</p><p>"))}function text_style(e,t){$(`#text`).css(e,t)}$("#hyphen_switch").change((function(){alert("成功触发checkbox改变事件")}));Boolean.prototype.center_left=function(){return this.valueOf()==true?"center":"left"};Boolean.prototype.indent20=function(){return this.valueOf()==true?"2em":"0em"};Boolean.prototype.inline_none=function(){return this.valueOf()==true?"inline":"none"};Boolean.prototype.bold_normal=function(){return this.valueOf()==true?"bold":"normal"};function pic_source_type(e){$("[id*=pic_source_type]").hide();$(`#pic_source_type${e}`).show()}function random_keyword(e){let t="";for(i=0;i<9;i++){t+=`<div class="pic-eg" style="background-image:url('https://source.unsplash.com/80${i}x0/?${e}')"></div>`}$("#pic_search_res").html(t);$(".pic-eg").on("click",(function(){let e=$(this).css("background-image");$("#result,#toppic").css("background-image",e);document.getElementById("pic").src=css2url(e)}))}function pic_upload(e){var t=e.files[0];var n=window.URL.createObjectURL(t);$("#result,#toppic").css("background-image",`url(${n})`)}function filter_reset(){document.getElementById("filter").setAttribute("style","");const e=[1,0,0,1,0,1,0];for(i=0;i<e.length;i++){$(`#tab3 div:eq(${i}) input`).val(`${e[i]}`);$(`#tab3 div:eq(${i}) span:eq(1)`).text(`${e[i]}`)}}function cssvar_change(e,t){let n="";if(e.indexOf("filter")>-1)n="filter";else n="result";document.getElementById(n).style.setProperty(`--${e}`,t)}function sentence_type(e){$(".letter_opt, .quote_opt").hide();switch(e){case"quote":$(".quote_opt").show();$("#text").removeClass("letter");$("#text").attr("data-letter-b","");$("#text").attr("data-letter-e","");$("#align_switch").prop("checked",1);$("#indent_switch").prop("checked",0);break;case"letter":$(".letter_opt").show();$("#text").addClass("letter");$("#text").attr("data-letter-b","11");$("#text").attr("data-letter-e","2");$("#align_switch").prop("checked",false);$("#indent_switch").prop("checked",true);break}}function letter_begin(e,t){e=e?"1":"0";t=t?"1":"0";$("#text").attr("data-letter-b",e+t)}function letter_end(e,t){e=e?1:0;t=t?1:0;$("#text").attr("data-letter-e",e+t)}function capture(){$("#filter,#result").css("border-radius",0);Swal.fire({icon:"info",title:"请稍后",html:"图片生成中",showConfirmButton:false,timer:15e3,timerProgressBar:true}).then((e=>{if(e.dismiss===Swal.DismissReason.timer){Swal.fire({icon:"error",title:"图片制作失败",html:"但您可直接对效果图截图",showConfirmButton:true})}}));let e=document.getElementById("result");html2canvas(e,{useCORS:true,allowTaint:true,taintTest:true,scale:3,width:e.getBoundingClientRect().width,height:e.getBoundingClientRect().height}).then((e=>{document.body.appendChild(e);let n=e.toDataURL("image/png",1);t("句摘截图",n);e.remove();$("#filter,#result").css("border-radius","5px");Swal.fire({icon:"success",title:"图片制作成功",html:"浏览器即将弹出下载对话框",showConfirmButton:true,timer:3e3})}));function t(e,t){var n=document.createElement("a");n.href=t;n.download=e;let r=document.createEvent("MouseEvents");r.initMouseEvent("click",true,false,window,0,0,0,0,0,false,false,false,false,0,null);n.dispatchEvent(r)}}function newtab(){var e=window.open();e.document.write("<html><title>图片</title>");e.document.write(`<body><script>window.onbeforeunload = function(e) {\n        var dialogText = '刷新将删除图片';\n        e.returnValue = dialogText;\n        return dialogText;\n      };<\/script>`);e.document.write('<link rel="stylesheet" href="/css/standalone/poster-result.css" type="text/css">');e.document.write($("#result_wrapper").html());e.document.write("</body></html>")}