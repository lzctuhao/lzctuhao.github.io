(function(t){"use strict";const e=b();const n=C();const o=L();const r=v();var i=new Set;const s={copyDefaultStyles:true,imagePlaceholder:undefined,cacheBust:false,useCredentials:false,httpTimeout:3e4,styleCaching:"strict"};const u={toSvg:a,toPng:h,toJpeg:m,toBlob:d,toPixelData:f,toCanvas:p,impl:{fontFaces:o,images:r,util:e,inliner:n,urlCache:[],options:{}}};if(typeof exports==="object"&&typeof module==="object"){module.exports=u}else{t.domtoimage=u}const c=t.getComputedStyle||window.getComputedStyle;const l=t.atob||window.atob;function a(t,n){const o=u.impl.util.getWindow(t);n=n||{};g(n);return Promise.resolve(t).then((function(t){return w(t,n,null,o)})).then(P).then(T).then(i).then((function(o){return S(o,n.width||e.width(t),n.height||e.height(t))})).then(r);function r(t){u.impl.urlCache=[];R();return t}function i(t){if(n.bgcolor){t.style.backgroundColor=n.bgcolor}if(n.width){t.style.width=`${n.width}px`}if(n.height){t.style.height=`${n.height}px`}if(n.style){Object.keys(n.style).forEach((function(e){t.style[e]=n.style[e]}))}let e=null;if(typeof n.onclone==="function"){e=n.onclone(t)}return Promise.resolve(e).then((function(){return t}))}}function f(t,n){return y(t,n).then((function(n){return n.getContext("2d").getImageData(0,0,e.width(t),e.height(t)).data}))}function h(t,e){return y(t,e).then((function(t){return t.toDataURL()}))}function m(t,e){return y(t,e).then((function(t){return t.toDataURL("image/jpeg",(e?e.quality:undefined)||1)}))}function d(t,n){return y(t,n).then(e.canvasToBlob)}function p(t,e){return y(t,e)}function g(t){if(typeof t.copyDefaultStyles==="undefined"){u.impl.options.copyDefaultStyles=s.copyDefaultStyles}else{u.impl.options.copyDefaultStyles=t.copyDefaultStyles}if(typeof t.imagePlaceholder==="undefined"){u.impl.options.imagePlaceholder=s.imagePlaceholder}else{u.impl.options.imagePlaceholder=t.imagePlaceholder}if(typeof t.cacheBust==="undefined"){u.impl.options.cacheBust=s.cacheBust}else{u.impl.options.cacheBust=t.cacheBust}if(typeof t.useCredentials==="undefined"){u.impl.options.useCredentials=s.useCredentials}else{u.impl.options.useCredentials=t.useCredentials}if(typeof t.httpTimeout==="undefined"){u.impl.options.httpTimeout=s.httpTimeout}else{u.impl.options.httpTimeout=t.httpTimeout}if(typeof t.styleCaching==="undefined"){u.impl.options.styleCaching=s.styleCaching}else{u.impl.options.styleCaching=t.styleCaching}if(typeof t.only_style!="undefined"){u.impl.options.only_style=t.only_style}}function y(t,n){i.clear();n=n||{};return a(t,n).then(e.makeImage).then((function(e){const r=typeof n.scale!=="number"?1:n.scale;const i=o(t,r);const s=i.getContext("2d");s.mozImageSmoothingEnabled=false;s.msImageSmoothingEnabled=false;s.imageSmoothingEnabled=false;if(e){s.scale(r,r);s.drawImage(e,0,0)}return i}));function o(t,o){const r=document.createElement("canvas");r.width=(n.width||e.width(t))*o;r.height=(n.height||e.height(t))*o;if(n.bgcolor){const t=r.getContext("2d");t.fillStyle=n.bgcolor;t.fillRect(0,0,r.width,r.height)}return r}}let E=null;function w(t,n,o,r){const i=n.filter;if(t===E||e.isHTMLScriptElement(t)||e.isHTMLStyleElement(t)||e.isHTMLLinkElement(t)||o!==null&&i&&!i(t)){return Promise.resolve()}return Promise.resolve(t).then(s).then((function(e){return l(u(t),e)})).then((function(e){return a(t,e)}));function s(t){if(e.isHTMLCanvasElement(t)){return e.makeImage(t.toDataURL())}return t.cloneNode(false)}function u(t){if(e.isElementHostForOpenShadowRoot(t)){return t.shadowRoot}return t}function l(t,o){const i=l(t);let s=Promise.resolve();if(i.length!==0){const l=c(u(t));e.asArray(i).forEach((function(t){s=s.then((function(){return w(t,n,l,r).then((function(t){if(t){o.appendChild(t)}}))}))}))}return s.then((function(){return o}));function u(t){if(e.isShadowRoot(t)){return t.host}return t}function l(t){if(e.isShadowSlotElement(t)){return t.assignedNodes()}return t.childNodes}}function a(t,r){if(!e.isElement(r)||e.isShadowSlotElement(t)){return Promise.resolve(r)}return Promise.resolve().then(i).then(s).then(u).then(l).then((function(){return r}));function i(){i(t,r);function e(t,e){e.font=t.font;e.fontFamily=t.fontFamily;e.fontFeatureSettings=t.fontFeatureSettings;e.fontKerning=t.fontKerning;e.fontSize=t.fontSize;e.fontStretch=t.fontStretch;e.fontStyle=t.fontStyle;e.fontVariant=t.fontVariant;e.fontVariantCaps=t.fontVariantCaps;e.fontVariantEastAsian=t.fontVariantEastAsian;e.fontVariantLigatures=t.fontVariantLigatures;e.fontVariantNumeric=t.fontVariantNumeric;e.fontVariationSettings=t.fontVariationSettings;e.fontWeight=t.fontWeight}function i(t,r){const i=c(t);if(i.cssText){r.style.cssText=i.cssText;e(i,r.style)}else{H(n,t,i,o,r);if(o===null){["inset-block","inset-block-start","inset-block-end"].forEach((t=>r.style.removeProperty(t)));["left","right","top","bottom"].forEach((t=>{if(r.style.getPropertyValue(t)){r.style.setProperty(t,"0px")}}))}}}}function s(){const n=e.uid();[":before",":after"].forEach((function(t){o(t)}));function o(o){const i=c(t,o);const s=i.getPropertyValue("content");if(s===""||s==="none"){return}const u=r.getAttribute("class")||"";r.setAttribute("class",`${u} ${n}`);const l=document.createElement("style");l.appendChild(a());r.appendChild(l);function a(){const t=`.${n}:${o}`;const r=i.cssText?u():c();return document.createTextNode(`${t}{${r}}`);function u(){return`${i.cssText} content: ${s};`}function c(){const t=e.asArray(i).map(n).join("; ");return`${t};`;function n(t){const e=i.getPropertyValue(t);const n=i.getPropertyPriority(t)?" !important":"";return`${t}: ${e}${n}`}}}}}function u(){if(e.isHTMLTextAreaElement(t)){r.innerHTML=t.value}if(e.isHTMLInputElement(t)){r.setAttribute("value",t.value)}}function l(){if(e.isSVGElement(r)){r.setAttribute("xmlns","http://www.w3.org/2000/svg");if(e.isSVGRectElement(r)){["width","height"].forEach((function(t){const e=r.getAttribute(t);if(e){r.style.setProperty(t,e)}}))}}}}}function P(t){return o.resolveAll().then((function(e){if(e!==""){const n=document.createElement("style");t.appendChild(n);n.appendChild(document.createTextNode(e))}return t}))}function T(t){return r.inlineAll(t).then((function(){return t}))}function S(t,n,o){return Promise.resolve(t).then((function(t){t.setAttribute("xmlns","http://www.w3.org/1999/xhtml");return(new XMLSerializer).serializeToString(t)})).then(e.escapeXhtml).then((function(t){return`<foreignObject width="${n}" height="${o}">${t}</foreignObject>`})).then((function(t){return`<svg xmlns="http://www.w3.org/2000/svg" width="${n}" height="${o}">${t}</svg>`})).then((function(t){return`data:image/svg+xml;charset=utf-8,${t}`}))}function b(){let e=0;return{escape:H,isDataUrl:T,canvasToBlob:b,resolveUrl:C,getAndEncode:A,uid:L,delay:$,asArray:D,escapeXhtml:M,makeImage:v,width:x,height:R,getWindow:n,isElement:s,isElementHostForOpenShadowRoot:o,isShadowRoot:r,isInShadowRoot:i,isHTMLElement:f,isHTMLCanvasElement:a,isHTMLInputElement:m,isHTMLImageElement:h,isHTMLLinkElement:d,isHTMLScriptElement:p,isHTMLStyleElement:g,isHTMLTextAreaElement:y,isShadowSlotElement:E,isSVGElement:w,isSVGRectElement:P};function n(e){const n=e?e.ownerDocument:undefined;return(n?n.defaultView:undefined)||t||window}function o(t){return s(t)&&t.shadowRoot!==null}function r(t){return t instanceof n(t).ShadowRoot}function i(t){return t!==null&&Object.prototype.hasOwnProperty.call(t,"getRootNode")&&r(t.getRootNode())}function s(t){return t instanceof n(t).Element}function a(t){return t instanceof n(t).HTMLCanvasElement}function f(t){return t instanceof n(t).HTMLElement}function h(t){return t instanceof n(t).HTMLImageElement}function m(t){return t instanceof n(t).HTMLInputElement}function d(t){return t instanceof n(t).HTMLLinkElement}function p(t){return t instanceof n(t).HTMLScriptElement}function g(t){return t instanceof n(t).HTMLStyleElement}function y(t){return t instanceof n(t).HTMLTextAreaElement}function E(t){return i(t)&&t instanceof n(t).HTMLSlotElement}function w(t){return t instanceof n(t).SVGElement}function P(t){return t instanceof n(t).SVGRectElement}function T(t){return t.search(/^(data:)/)!==-1}function S(t){return new Promise((function(e){const n=l(t.toDataURL().split(",")[1]);const o=n.length;const r=new Uint8Array(o);for(let t=0;t<o;t++){r[t]=n.charCodeAt(t)}e(new Blob([r],{type:"image/png"}))}))}function b(t){if(t.toBlob){return new Promise((function(e){t.toBlob(e)}))}return S(t)}function C(t,e){const n=document.implementation.createHTMLDocument();const o=n.createElement("base");n.head.appendChild(o);const r=n.createElement("a");n.body.appendChild(r);o.href=e;r.href=t;return r.href}function L(){return`u${t()}${e++}`;function t(){return`0000${(Math.random()*Math.pow(36,4)<<0).toString(36)}`.slice(-4)}}function v(t){if(t==="data:,"){return Promise.resolve()}return new Promise((function(e,n){const o=new Image;if(u.impl.options.useCredentials){o.crossOrigin="use-credentials"}o.onload=function(){e(o)};o.onerror=n;o.src=t}))}function A(t){let e=u.impl.urlCache.find((function(e){return e.url===t}));if(!e){e={url:t,promise:null};u.impl.urlCache.push(e)}if(e.promise===null){if(u.impl.options.cacheBust){t+=(/\?/.test(t)?"&":"?")+(new Date).getTime()}e.promise=new Promise((function(e){const n=u.impl.options.httpTimeout;const o=new XMLHttpRequest;o.onreadystatechange=i;o.ontimeout=s;o.responseType="blob";o.timeout=n;if(u.impl.options.useCredentials){o.withCredentials=true}o.open("GET",t,true);o.send();let r;if(u.impl.options.imagePlaceholder){const t=u.impl.options.imagePlaceholder.split(/,/);if(t&&t[1]){r=t[1]}}function i(){if(o.readyState!==4){return}if(o.status!==200){if(r){e(r)}else{c(`cannot fetch resource: ${t}, status: ${o.status}`)}return}const n=new FileReader;n.onloadend=function(){e(n.result)};n.readAsDataURL(o.response)}function s(){if(r){e(r)}else{c(`timeout of ${n}ms occured while fetching resource: ${t}`)}}function c(t){console.error(t);e("")}}))}return e.promise}function H(t){return t.replace(/([.*+?^${}()|[]\/\\])/g,"\\$1")}function $(t){return function(e){return new Promise((function(n){setTimeout((function(){n(e)}),t)}))}}function D(t){const e=[];const n=t.length;for(let o=0;o<n;o++){e.push(t[o])}return e}function M(t){return t.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")}function x(t){var e=V(t,"width");if(isNaN(e)){const n=V(t,"border-left-width");const o=V(t,"border-right-width");e=t.scrollWidth+n+o}return e}function R(t){var e=V(t,"height");if(isNaN(e)){const n=V(t,"border-top-width");const o=V(t,"border-bottom-width");e=t.scrollHeight+n+o}return e}function V(t,e){let n=c(t).getPropertyValue(e);if(n.slice(-2)!=="px"){return NaN}n=n.slice(0,-2);return parseFloat(n)}}function C(){const t=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:i,shouldProcess:n,impl:{readUrls:o,inline:r}};function n(e){return e.search(t)!==-1}function o(n){const o=[];let r;while((r=t.exec(n))!==null){o.push(r[1])}return o.filter((function(t){return!e.isDataUrl(t)}))}function r(t,n,o,r){return Promise.resolve(n).then((function(t){return o?e.resolveUrl(t,o):t})).then(r||e.getAndEncode).then((function(e){return t.replace(i(n),`$1${e}$3`)}));function i(t){return new RegExp(`(url\\(['"]?)(${e.escape(t)})(['"]?\\))`,"g")}}function i(t,e,i){if(s()){return Promise.resolve(t)}return Promise.resolve(t).then(o).then((function(n){let o=Promise.resolve(t);n.forEach((function(t){o=o.then((function(n){return r(n,t,e,i)}))}));return o}));function s(){return!n(t)}}}function L(){return{resolveAll:t,impl:{readAll:o}};function t(){return o().then((function(t){return Promise.all(t.map((function(t){return t.resolve()})))})).then((function(t){return t.join("\n")}))}function o(){return Promise.resolve(e.asArray(document.styleSheets)).then(o).then(t).then((function(t){return t.map(r)}));function t(t){return t.filter((function(t){return t.type===CSSRule.FONT_FACE_RULE})).filter((function(t){return n.shouldProcess(t.style.getPropertyValue("src"))}))}function o(t){const n=[];const o=typeof u.impl.options.only_style==="undefined"?false:u.impl.options.only_style;t.forEach((function(t){if(o&&t.href&&t.href.indexOf(o)>-1||!o){if(Object.prototype.hasOwnProperty.call(Object.getPrototypeOf(t),"cssRules")){try{e.asArray(t.cssRules||[]).forEach(n.push.bind(n))}catch(e){console.error(`domtoimage: Error while reading CSS rules from ${t.href}`,e.toString())}}}}));return n}function r(t){return{resolve:function e(){const o=(t.parentStyleSheet||{}).href;if(i.has(t.style.fontFamily)){return n.inlineAll(t.cssText,o)}return Promise.resolve("")},src:function(){return t.style.getPropertyValue("src")}}}}}function v(){return{inlineAll:o,impl:{newImage:t}};function t(t){return{inline:n};function n(n){if(e.isDataUrl(t.src)){return Promise.resolve()}return Promise.resolve(t.src).then(n||e.getAndEncode).then((function(e){return new Promise((function(n){t.onload=n;t.onerror=n;t.src=e}))}))}}function o(r){if(!e.isElement(r)){return Promise.resolve(r)}return i(r).then((function(){if(e.isHTMLImageElement(r)){return t(r).inline()}else{return Promise.all(e.asArray(r.childNodes).map((function(t){return o(t)})))}}));function i(t){const e=["background","background-image"];const o=e.map((function(e){const o=t.style.getPropertyValue(e);const r=t.style.getPropertyPriority(e);if(!o){return Promise.resolve()}return n.inlineAll(o).then((function(n){t.style.setProperty(e,n,r)}))}));return Promise.all(o).then((function(){return t}))}}}function A(t,e,n,o){const r=["background-clip"].indexOf(e)>=0;if(o){t.setProperty(e,n,o);if(r){t.setProperty(`-webkit-${e}`,n,o)}}else{t.setProperty(e,n);if(r){t.setProperty(`-webkit-${e}`,n)}}}function H(t,n,o,r,s){const c=u.impl.options.copyDefaultStyles?x(t,n):{};const l=s.style;e.asArray(o).forEach((function(t){const e=o.getPropertyValue(t);if(t=="font-family"){e.replace(/[ \"\']/g,"").split(",").forEach((function(t){i.add(t)}))}const n=c[t];const s=r?r.getPropertyValue(t):undefined;if(e!==n||r&&e!==s){const n=o.getPropertyPriority(t);A(l,t,e,n)}}))}let $=null;let D={};const M=["ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","DETAILS","DIALOG","DD","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","MAIN","NAV","OL","P","PRE","SECTION","SVG","TABLE","UL","math","svg","BODY","HEAD","HTML"];function x(t,n){const o=c(n);const r=l(o);if(D[r]){return D[r]}const i=a();const s=f(i.document,o);const u=h(i,s);m(s);D[r]=u;return u;function c(t){const e=Node.ELEMENT_NODE||1;const n=[];do{if(t.nodeType===e){const e=t.tagName;n.push(e);if(M.includes(e)){break}}t=t.parentNode}while(t);return n}function l(e){if(t.styleCaching==="relaxed"){return e.filter(((t,e,n)=>e===0||e===n.length-1)).join(">")}return e.join(">")}function a(){if(E){return E.contentWindow}const t=document.characterSet||"UTF-8";const n=document.doctype;const o=n?`<!DOCTYPE ${r(n.name)} ${r(n.publicId)} ${r(n.systemId)}`.trim()+">":"";E=document.createElement("iframe");E.id="domtoimage-sandbox-"+e.uid();E.style.visibility="hidden";E.style.position="fixed";document.body.appendChild(E);return i(E,o,t,"domtoimage-sandbox");function r(t){if(t){const e=document.createElement("div");e.innerText=t;return e.innerHTML}else{return""}}function i(t,e,n,o){try{t.contentWindow.document.write(`${e}<html><head><meta charset='${n}'><title>${o}</title></head><body></body></html>`);return t.contentWindow}catch(t){}const r=document.createElement("meta");r.setAttribute("charset",n);try{const n=document.implementation.createHTMLDocument(o);n.head.appendChild(r);const i=e+n.documentElement.outerHTML;t.setAttribute("srcdoc",i);return t.contentWindow}catch(t){}t.contentDocument.head.appendChild(r);t.contentDocument.title=o;return t.contentWindow}}function f(t,e){let n=t.body;do{const o=e.pop();const r=t.createElement(o);n.appendChild(r);n=r}while(e.length>0);n.textContent="â€‹";return n}function h(t,n){const o={};const r=t.getComputedStyle(n);e.asArray(r).forEach((function(t){o[t]=t==="width"||t==="height"?"auto":r.getPropertyValue(t)}));return o}function m(t){do{const e=t.parentElement;if(e!==null){e.removeChild(t)}t=e}while(t&&t.tagName!=="BODY")}}function R(){if(E){document.body.removeChild(E);E=null}if($){clearTimeout($)}$=setTimeout((()=>{$=null;D={}}),20*1e3)}})(this);