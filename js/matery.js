var myDate=new Date;var month=myDate.getMonth()+1;var date=myDate.getDate();var year=myDate.getFullYear();import highlightAnchor from"/js/modules/MUI/highlightAnchor.js";(function(){function e(e,t){return function(n,o,r=t,i="inherit"){const a=`border-radius:5px; background-color: ${r}; color: white; padding:1px 5px; margin-right: 5px;`;const s=`color: ${i};`;e(`%c${n}%c${o}`,a,s)}}console.tag=e(console.log,"forestgreen");console.tag.warn=e(console.warn,"orange");console.tag.error=e(console.error,"red");console.tag.info=e(console.log,"lightblue")})();$((function(){if(typeof MathJax==="undefined"){$("#loading-cover").fadeOut(500)}$("body").addClass("NowCanShow");document.querySelectorAll("img").forEach((async e=>{const t=e.getAttribute("src");if(t&&t.includes("source.unsplash.com")){let n=await MUtils.unsplash_new(t);e.setAttribute("src",n);if(e.parentNode.tagName=="FIGURE"){e.parentNode.setAttribute("href",n)}}}));document.querySelectorAll(".post-card,.aplayer-pic,.article-image,.imgbg.card").forEach((async e=>{const t=e.getAttribute("style");if(t&&t.includes("background-image")){const n=t.match(/https:\/\/source.unsplash.com\/([-\w]+)?(\/\d+?x+?\d+)?/);if(n)e.style.backgroundImage=`url(${await MUtils.unsplash_new(n[0])})`}}));let e=document.querySelectorAll(".sidenav");M.Sidenav.init(e);let t=function(e,t){let n=$("#"+e);if(n.length===0){return}let o=n.width();if(o>=450){o=o+21}else if(o>=350&&o<450){o=o+18}else if(o>=300&&o<350){o=o+16}else{o=o+14}$("#"+t).width(o)};let n=function(){$(".content").css("min-height",window.innerHeight-165)};$("#articles").masonry({itemSelector:".article"});if(MInfo.is_mobile_){$("#articleContent sup a").attr("href","javascript:void(0)")}MInfo.is_wxbrowser();$(".modal:not(#app_agree)").modal();$(".tabs").tabs();if(document.body.clientWidth<=600){$("#backTop").remove()}$("#backTop").click((function(){$("body,html").animate({scrollTop:0},400);return false}));let o=$("#headNav");let r=$(".top-scroll");i($(window).scrollTop());$(window).scroll((function(){let e=$(window).scrollTop();i(e)}));function i(e){let t=56;if(e<t){o.addClass("nav-transparent");r.slideUp(300)}else{o.removeClass("nav-transparent");r.slideDown(300)}}let a=$("body").innerWidth();$(".nav-menu>li").hover((function(){$(this).children("ul").stop(true,true).show();$(this).addClass("nav-show").siblings("li").removeClass("nav-show")}),(function(){$(this).children("ul").stop(true,true).hide();$(".nav-item.nav-show").removeClass("nav-show")}));$(".m-nav-item>a").on("click",(function(){if($(this).next("ul").css("display")=="none"){$(".m-nav-item").children("ul").slideUp(300);$(this).next("ul").slideDown(100);$(this).parent("li").addClass("m-nav-show").siblings("li").removeClass("m-nav-show")}else{$(this).next("ul").slideUp(100);$(".m-nav-item.m-nav-show").removeClass("m-nav-show")}}));$(".tooltipped").tooltip();if(MUtils.URLParam("noheader")&&MUtils.URLParam("noheader")!="false"){document.documentElement.style.setProperty("--header-height","0px");$("body").append('<link rel="stylesheet" href="/css/no-header.css">');if(document.body.clientWidth>992||!document.getElementById("tabs-swipe-demo")){$("#headNav").remove()}else{$("#toggleSearch").remove();$("#Container1").remove();$("#tabs-swipe-demo li:first-child").remove();$("#test-swipe-1").remove()}$("#prenext-posts").remove();$("#reward").remove()}else{if(!MInfo.is_wxbrowser()&&$(window).width()<=600&&$("#Container2").length>0){var s=0;var l=0;$(window).scroll((function(e){var t=$(this).scrollTop();var n=t-s;if(t>400){if(n>10&&l==0){$("#MotherContainer").animate({top:"-=40px"});l=1}if(n<-10&&l==1){$("#MotherContainer").animate({top:"+=40px"});l=0}}setTimeout((function(){s=t}),0)}))}else{$("#Container2").remove()}}const c=window.location.hash;if(c)highlightAnchor(decodeURIComponent(c.substring(1)));window.addEventListener("hashchange",(()=>highlightAnchor()));if(MInfo.is_mobile_){const f=document.querySelector("#artDetail");const m=document.querySelector(".sidenav-overlay");const p="#mobile-nav";let w=0;let g=0;const y=.3;function u(){const e=M.Sidenav.getInstance(document.querySelector(p));e.open()}function d(){const e=M.Sidenav.getInstance(document.querySelector(p));e.close()}function h(e){return e/window.innerWidth}if(f){f.addEventListener("touchstart",(e=>{w=e.touches[0].clientX}));f.addEventListener("touchend",(e=>{if(h(w)>.3)return;g=e.changedTouches[0].clientX;const t=g-w;if(h(t)>y){u()}}))}}MUtils.show_beian();if(MUtils.URLParam("mode")&&MUtils.URLParam("mode").indexOf("app")>=0){document.querySelectorAll(".app1,#comments,.reprint").forEach((e=>e.remove()))}else{}}));const MInfo={get ua_(){return navigator.userAgent},get is_wxbrowser_(){return this.is_wxbrowser()},get is_wx_(){return this.is_wxbrowser()},is_wxbrowser:function(){var e=navigator.userAgent.toLowerCase();if(e.match(/MicroMessenger/i)=="micromessenger"){$("#headNav").css("position","absolute");return true}else return false},get is_mobile_(){let e={Android:function(){return navigator.userAgent.match(/Android/i)?true:false},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)?true:false},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)?true:false},Windows:function(){return navigator.userAgent.match(/IEMobile/i)?true:false},any:function(){return e.Android()||e.BlackBerry()||e.iOS()||e.Windows()}};return e.any()},get iploc_(){return new Promise((function(e,t){const n={url:"https://apis.map.qq.com/ws/location/v1/ip?key=4WGBZ-ZAWRX-CFU43-TPU2J-ZHK6O-OIBNR&output=jsonp",method:"GET",dataType:"jsonp",timeout:0};$.ajax(n).done((function(t){if(t.status==0&&t.result.ad_info.nation=="中国"){e([t.result.ip,t.result.ad_info.nation!="中国"?t.result.ad_info.nation:t.result.ad_info.adcode+t.result.ad_info.province+(t.result.ad_info.province==t.result.ad_info.city?"":t.result.ad_info.city)+t.result.ad_info.district])}else{o()}})).fail((function(e,t,n){o()}));function o(){const n={url:"https://api.ipgeolocation.io/ipgeo?apiKey=687a87c0dbde4cf69ced37d54c496325",method:"GET",dataType:"json",timeout:0};$.ajax(n).done((function(t){e([t.ip,t.city+", "+t.isp+", "+t.country_name+", "+t.continent_name])})).fail((function(e,n,o){console.error(n,o);t([null,null])}))}}))},get fingerprint_(){return new Promise((async function(e,t){await MUtils.loadFile("/libs/valine/iife.min.js");FingerprintJS.load().then((e=>e.get())).then((t=>e(t.visitorId))).catch((e=>t(e)))}))}};const MUtils={show_beian:function(e=this.URLParam("mode")){if(!e){this.show_beian("mps web");return true}e=e.split(" ");document.querySelectorAll(".beian").forEach((e=>e.classList.add("hide")));e.forEach((e=>{document.querySelectorAll(".beian."+e).forEach((e=>e.classList.remove("hide")))}))},update_URLParams:function(e,...t){const n=new URLSearchParams(e.split("?")[1]||"");for(let e=0;e<t.length;e+=2){if(t[e+1]==="")n.delete(t[e]);else n.set(t[e],t[e+1])}return`${e.split("?")[0]}?${n.toString()}`},URLParam:function(e,t=null,n=window.location.href){let o=new URL(n);const r=new URLSearchParams(o.search);if(t===null){let t=r.get("clear");if(t){t.split(",").forEach((t=>{if(e==t&&r.get(t)){this.URLParam(t,"",n)}}))}let o=r.get(e);o=MUtils.safeParse(o);if(e=="password"){try{o=atob(o)}catch{console.warn("无法解码"+e)}}return o}else{let o=this.update_URLParams(n,e,t);if(n==window.location.href){window.history.replaceState({},"",o)}return o}},loadFile:function(e){return new Promise(((t,n)=>{const o=/\.(\w+)$/.exec(e);if(!o){n(new Error("Invalid file name"));return}const r=o[1];let i,a;if(r==="js"){i="script";a="src"}else if(r==="css"){i="link";a="href"}else{n(new Error("Unsupported file type"));return}const s=document.querySelectorAll(i);for(let n=0;n<s.length;n++){if(s[n].getAttribute(a)===e){t("File already loaded");return}}const l=document.createElement(i);if(r==="css"){l.rel="stylesheet";l.type="text/css"}else{l.type="text/javascript"}l[a]=e;l.onload=()=>t("File loaded successfully");l.onerror=()=>n(new Error("Error loading file"));document.head.appendChild(l)}))},loadScriptsSequentially:function(e){function t(n){if(n>=e.length)return;var o=document.createElement("script");o.src=e[n][0];o.defer=true;o.onload=function(){if(e[n][1]){e[n][1]()}t(n+1)};document.head.appendChild(o)}t(0)},unsplash_new:async function(e,t=1,n="regular"){console.tag("Unsplash","now searching page "+t);const o=7*24*60*60*1e3;const r=(new Date).getTime();const i="unsplash-cache";const a=await caches.open(i);const s=await a.match(e);if(s){const t=await s.json();console.tag("Unsplash",`Cache for ${e} found.`);if(r-t.timestamp<o){return t.result}}const l=4;const c=e.match(/https:\/\/source.unsplash.com\/([-\w]+)?\/?(\d+)?x?(\d+)?/);if(!c){throw new Error("Invalid URL format.")}let[u,d,h,f]=c;if(!d){d="";console.warn(d);const t=await p();await w(e,t);return t}try{console.tag("Unsplash",t+"finding_page");const o=await $.ajax({url:`https://api.unsplash.com/collections/CBPlaRQlVQo/photos/?client_id=HDbS2nAmPx8B4FKmzLYF3FEBUhbxXTtJcTyzdQCJr3M&per_page=30&page=${t}`,method:"GET",dataType:"json"});let r=false;for(let t of o){if(t.id===d){console.log(`Get ${d} from Unsplash collection successfully!`);r=true;const o=m(t["urls"][n]);await w(e,o);return o}}console.tag("Unsplash",r+" in page "+t);if(!r){if(t<l){console.warn(r+" in page "+t+"(repeat)");const o=await this.unsplash_new(e,t+1,n);await w(e,o);return o}else{const t=await p();await w(e,t);return t}}}catch(t){if(t.status==403){Toast.fire("部分图片受限无法加载",t.responseText,"warning");return null}const n=await p();await w(e,n);return n}function m(e){return f&&h?MUtils.update_URLParams(e,"w",h,"h",f,"fit","crop","crop","faces,entropy","auto","compress"):e}function p(){return new Promise(((e,t)=>{$.ajax({url:`https://api.unsplash.com/photos/${d}?client_id=HDbS2nAmPx8B4FKmzLYF3FEBUhbxXTtJcTyzdQCJr3M`,method:"GET",dataType:"json"}).done((t=>{const o=d?t["urls"][n]:t[Math.floor(Math.random()*11)]["urls"][n];e(m(o))})).fail((()=>{t("Error when calling Unsplash API.")}))}))}async function w(e,t){const n={timestamp:r,result:t};const o=new Response(JSON.stringify(n),{headers:{"Content-Type":"application/json"}});await a.put(e,o)}},random_pic:async function(e=""){return new Promise(((t,n)=>{$.ajax({url:`https://api.unsplash.com/photos/random?client_id=HDbS2nAmPx8B4FKmzLYF3FEBUhbxXTtJcTyzdQCJr3M&`+e,method:"GET",dataType:"json"}).done((e=>{let n=[e.urls.full,e.user.name,e.user.links.html+"?utm_source=lzc%27s%20blog&utm_medium=referral","https://unsplash.com/?utm_source=lzc%27s%20blog&utm_medium=referral"];t(n)})).fail((()=>{n("Error when calling Unsplash API.")}))}))},console_tag:function(e,t,n="gray",o="inherit"){const r=`border-radius: 5px; background-color:${n}; color:white;padding:1px 5px;margin-right: 5px;`;const i=`color:${o};`;console.log(`%c${e}%c${t}`,r,i)},safeParse:function(e){if(typeof e!=="string")return e;if(!isNaN(e)&&e.trim()!==""){return Number(e)}const t=e.toLowerCase();if(t==="true")return true;if(t==="false")return false;return e}};function outloadinfo(e){console.info(e);$("#load-info").text(e)}function getUrlParam(e,t=null){console.warn("请使用 `MUtils.URLParam` ！");return MUtils.URLParam(e,t)}function wechat_account(){var e=navigator.userAgent.toLowerCase();if(e.match(/MicroMessenger/i)=="micromessenger"){window.location.href="https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz=Mzk0ODE4MzExNg==&scene=124#wechat_redirect"}else{Swal.fire({title:'<span style="background:#c2185b;border-radius:16px;padding:2px 10px;color:white;">ID</span>&nbsp;lzc的碎碎念',html:'下载图片，然后在微信中扫一扫<br><a href="/../medias/wxqr.jpg" download="微信扫一扫.jpg">下载图片</a><br><img src="/../medias/wxqr.jpg" style="width: 260px;" alt="lzc的碎碎念" />',showCloseButton:true,showCancelButton:false,showConfirmButton:false,allowOutsideClick:false})}}function primary_series(e){Swal.fire({title:"小学练习系列页面",showConfirmButton:false,showCloseButton:true,html:` <div id="primary_series" class="collection">\n        <a href="javascript:window.location.href='/tools/primary/'+window.location.search" class="collection-item">最大公约数练习</a>\n        <a href="javascript:window.location.href='/tools/primary2/'+window.location.search" class="collection-item">两位数除以一位数</a>\n        <a href="javascript:window.location.href='/2022/0814/folder-ganhuo/xiao-liu-ying-yu/'+window.location.search" class="collection-item">六上单词</a>\n        <a href="javascript:window.location.href='/tools/primary_result/'+window.location.search" class="collection-item">成绩公示页</a>\n      </div>`});if(e>0){$("#primary_series").find("a").eq(e-1).append('<span class="badge">当前</span>')}}const Toast=Swal.mixin({toast:true,position:"top-end",showConfirmButton:false,timer:3e3,didOpen:e=>{e.addEventListener("mouseenter",Swal.stopTimer);e.addEventListener("mouseleave",Swal.resumeTimer)}});