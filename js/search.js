$(function(){!function(t,n,a){"use strict";$.ajax({url:t,dataType:"xml",success:function(t){document.getElementById("searchLoading").remove();var e=$("entry",t).map(function(){return{title:$("title",this).text(),author:$("author",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),t=document.getElementById(n),r=document.getElementById(a);t.addEventListener("input",function(){var f='<ul class="search-result-list">',m=this.value.trim().toLowerCase().split(/[\s\-]+/);r.innerHTML="",this.value.trim().length<=0||(e.forEach(function(t){var r,e,n,a=!0,s=t.title.trim().toLowerCase(),i=t.author?t.author.trim().toLowerCase():"",c=t.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),l=0===(l=t.url).indexOf("/")?t.url:"/"+l,u=-1,o=-1,h=-1;""!==s&&""!==c&&m.forEach(function(t,e){r=s.indexOf(t),u=i.indexOf(t),o=c.indexOf(t),r<0&&u<0&&o<0?a=!1:(o<0&&(o=0),0===e&&(h=o))}),a&&(f+="<li><a href='"+l+"' class='search-result-title'>"+s+"</a>",-1<u&&(f+="<span class='search-result-author'><i class='fa fa-user fa-fw'></i>"+i+"</span>"),l=t.content.trim().replace(/<[^>]+>/g,""),0<=h&&(t=h+80,(t=0===(e=(e=h-20)<0?0:e)?100:t)>l.length&&(t=l.length),n=l.substr(e,t),m.forEach(function(t){var e=new RegExp(t,"gi");n=n.replace(e,'<em class="search-keyword">'+t+"</em>")}),f+='<p class="search-result">'+n+"...</p>"),f+="</li>")}),f+="</ul>",r.innerHTML=f)})}})}("/search.xml","searchInput","searchResult")});