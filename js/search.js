$((function(){var e=function(e,t,r){"use strict";$.ajax({url:e,dataType:"xml",success:function(e){document.getElementById("searchLoading").remove();var a=$("entry",e).map((function(){return{title:$("title",this).text(),author:$("author",this).text(),content:$("content",this).text(),url:$("url",this).text()}})).get();var i=document.getElementById(t);var n=document.getElementById(r);i.addEventListener("input",(function(){var e='<ul class="search-result-list">';var t=this.value.trim().toLowerCase().split(/[\s\-]+/);n.innerHTML="";if(this.value.trim().length<=0){return}a.forEach((function(r){var a=true;var i=r.title.trim().toLowerCase();var n=r.author?r.author.trim().toLowerCase():"";var s=r.content.trim().replace(/<[^>]+>/g,"").toLowerCase();var l=r.url;l=l.indexOf("/")===0?r.url:"/"+l;var c=-1;var u=-1;var o=-1;var f=-1;if(i!==""&&s!==""){t.forEach((function(e,t){c=i.indexOf(e);u=n.indexOf(e);o=s.indexOf(e);if(c<0&&u<0&&o<0){a=false}else{if(o<0){o=0}if(t===0){f=o}}}))}if(a){e+="<li><a href='"+l+"' class='search-result-title'>"+i+"</a>";if(u>-1){e+="<span class='search-result-author'><i class='fa fa-user fa-fw'></i>"+n+"</span>"}var h=r.content.trim().replace(/<[^>]+>/g,"");if(f>=0){var v=f-20;var m=f+80;if(v<0){v=0}if(v===0){m=100}if(m>h.length){m=h.length}var d=h.substr(v,m);t.forEach((function(e){var t=new RegExp(e,"gi");d=d.replace(t,'<em class="search-keyword">'+e+"</em>")}));e+='<p class="search-result">'+d+"...</p>"}e+="</li>"}}));e+="</ul>";n.innerHTML=e}))}})};e("/search.xml","searchInput","searchResult")}));