$((function(){var e=function(e,t,r){"use strict";$.ajax({url:e,dataType:"xml",success:function(e){document.getElementById("searchLoading").remove();document.getElementById("searchResult").disabled=false;var a=$("entry",e).map((function(){return{title:$("title",this).text(),author:$("author",this).text(),content:$("content",this).text(),url:$("url",this).text()}})).get();var s=document.getElementById(t);var n=document.getElementById(r);s.addEventListener("input",(function(){var e='<ul class="search-result-list">';var t=this.value.trim().toLowerCase().split(/[\s\-]+/);n.innerHTML="";if(this.value.trim().length<=0){return}for(let n=0;n<a.length;n++){let p=a[n];var r=true;var s=p.title.trim().toLowerCase();var i=p.author?p.author.trim().toLowerCase():"";var l=p.content.trim().replace(/<[^>]+>/g,"").toLowerCase();var u=p.url;u=u.indexOf("/")===0?p.url:"/"+u;var c=-1;var o=-1;var f=-1;var h=-1;if(s!==""&&l!==""){t.forEach((function(e,t){c=s.indexOf(e);o=i.indexOf(e);f=l.indexOf(e);if(c<0&&o<0&&f<0){r=false}else{if(f<0){f=0}if(t===0){h=f}}}))}else continue;if(r){e+="<li><a href='"+u+"' class='search-result-title'>"+s+"</a>";if(o>-1){e+="<span class='search-result-author'><i class='fa fa-user fa-fw'></i>"+i+"</span>"}var v=p.content.trim().replace(/<[^>]+>/g,"");if(h>=0){var m=h-20;var d=h+80;if(m<0){m=0}if(m===0){d=100}if(d>v.length){d=v.length}var g=v.substr(m,d);t.forEach((function(e){var t=new RegExp(e,"gi");g=g.replace(t,'<em class="search-keyword">'+e+"</em>")}));e+='<p class="search-result">'+g+"...</p>"}e+="</li>"}}e+="</ul>";n.innerHTML=e}))}})};e("/search.xml","searchInput","searchResult")}));