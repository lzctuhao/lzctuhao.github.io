var marker,markers=[],OpenInAPP=[];const Toast=Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!1}),Toast2=Swal.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!1});window.onload=function(){RemoveDOM(),window.map=new AMap.Map("mapcontainer",{resizeEnable:!0,center:[112.94161,28.149338],zoom:17,mapStyle:window.matchMedia("(prefers-color-scheme: dark)").matches?"amap://styles/dark":"amap://styles/normal"}),mylocation(),window.mySwiper=new Swiper(".swiper",{navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0}}),initial(),CreateCorridor(),CreateFloorMap(),menu(),refresh()};var showOnly=["Train","StudyRoom"];const avoid=[210,25,20,15];var pointsWC=[[112.941269,28.150461],[112.942664,28.149694],[112.940735,28.149703],[112.942572,28.148966],[112.94073,28.148954],[112.941083,28.148367],[112.942332,28.148703],[112.941723,28.148733],[112.940707,28.148432],[112.941964,28.148588]],textWC=["A座N22 N23之间","B座最东","B座最西","C座N11旁","C座N02旁","D129旁","D116旁","D北2门旁","D101旁","D122旁"],remarksWC=[,,,"C座最东","C座最西"],labelpositionsWC=["top"],colorsWC=["green","green","green","green","green","green","green","green","green","green"],pointsA=[[112.941548,28.150408],[112.942323,28.150016],[112.941874,28.150003],[112.940941,28.149976],[112.941014,28.149978]],textA=["A双正门 (电梯)","A东门","A东南门","A西1门","A西2门"],labelpositionsA=["bottom",,,"left"],colorsA=[,,,,,"green"],pointsB=[[112.941643,28.149741],[112.94272,28.149945],[112.942629,28.14949],[112.942215,28.149706],[112.94107,28.149718],[112.940733,28.149537],[112.940763,28.149912]],labelpositionsB=[],textB=["B正门(x4)","B东北门","B东南门","B内庭门(仅行人)","B内庭门(仅行人)","B西南门","B西北门"],colorsB=[,,,"grey","grey"],pointsC=[[112.940573,28.149018],[112.941645,28.149],[112.942224,28.14902],[112.942731,28.149038]],textC=["C西门","C正门","C东2门","C东1门"],pointsD=[[112.941431,28.148798],[112.941777,28.148798],[112.941438,28.147993],[112.941795,28.147993],[112.942637,28.148196],[112.94084,28.147975],[112.942142,28.148832],[112.942559,28.148832],[112.94116,28.148767],[112.940443,28.148469]],textD=["D北1门","D北2门","D南1门","D南2门","D东南门","D西南门","D东北门x2","D东门","D西北门","D西门"],pointsWater=[[112.94192,28.150467],[112.942613,28.149899],[112.942557,28.148971],[112.942223,28.148524]],labelpositionsWater=["top"],textWater=["A117旁","B110旁","C113教员休息室内","D117旁"],colorsWater=["purple","purple","purple","purple"],remarksWater=["热水","热水","热水","热水"],pointsStudyRoom=[[112.944418,28.149675],[112.935214,28.157465],[112.935494,28.160674],[112.941582,28.14935]],labelpositionsStudyRoom=["left"],textStudyRoom=["新校区图书馆","知新馆","马克思主义学院","教学楼空教室"],colorsStudyRoom=["brown","brown","brown","brown"],remarksStudyRoom=["每天7:30~22:30","每天8:00~22:00","每天7:00~22:00","A座 每天7:00~22:00<br/>BCD座 每天7:00~21:00"],pointsTrain=[[112.931439,28.169933],[112.991883,28.138976],[112.9399,28.221029]],textTrain=["本部二办","铁道一站式服务中心","湘雅新校12食堂"],colorsTrain=["orange","orange","orange","orange"],remarksTrain=["1F大厅进门右侧共4台","共2台","楼上共2台"],labelpositionsTrain=[,"left"];function initial(){markpoints(pointsWC,textWC,"WC"),markpoints(pointsA,textA,"A"),markpoints(pointsB,textB,"B"),markpoints(pointsC,textC,"C"),markpoints(pointsD,textD,"D"),markpoints(pointsWater,textWater,"Water"),markpoints(pointsStudyRoom,textStudyRoom,"StudyRoom"),markpoints(pointsTrain,textTrain,"Train")}function RemoveDOM(){$("header , #backTop").remove()}function addOverlay(buildingName){showOnly.indexOf(buildingName)>-1&&removeAll(),eval("map.add(overlayGroups"+buildingName+")"),eval('$("#Checkbox'+buildingName+'").prop("checked",true)')}function removeOverlay(buildingName){eval("map.remove(overlayGroups"+buildingName+")"),eval('$("#Checkbox'+buildingName+'").prop("checked",false)')}function arrayIIsDefined(arrayname,i){return!eval("typeof "+arrayname+'==="undefined"')&&void 0!==eval(arrayname)[i]}function markpoints(points,texts,buildingName){markers=[];let offset,direction,color,zIndex,remark="";for(i=0;i<texts.length;i++)arrayIIsDefined("labelpositions"+buildingName,i)?(direction=eval("labelpositions"+buildingName)[i],offset=new AMap.Pixel(0,-30)):(direction="right",offset=new AMap.Pixel(0,0)),arrayIIsDefined("colors"+buildingName,i)?(color=eval("colors"+buildingName)[i],zIndex="green"==color?99:100):(color="blue",zIndex=100),remark=arrayIIsDefined("remarks"+buildingName,i)?"("+eval("remarks"+buildingName)[i]+")":"",marker=new AMap.Marker({position:points[i],icon:cdn+"/medias/mapsource/"+color+".png",offset:new AMap.Pixel(-13,-30),topWhenClick:!0,zIndex:zIndex}),marker.setLabel({content:"<div class='mapdoor'>"+texts[i]+"<br/><span>"+remark+"</span></div>",direction:direction}),marker.on("click",(function(e){pointClick([$(this)[0]._position[0],$(this)[0]._position[1]],$(this)[0].dom.innerText)})),markers.push(marker);eval("window.overlayGroups"+buildingName+" = new AMap.OverlayGroup(markers)"),$('label[for="Checkbox'+buildingName+'"]').append("("+eval("points"+buildingName+".length")+")")}function pointClick(position,text){$("#click2route").is(":checked")?showAndDrawRoute(position,text):map.setZoomAndCenter(25,position)}function CreateCorridor(){let polylines=[],path=[[[112.941005,28.15008],[112.941005,28.14996]],[[112.942435,28.150094],[112.942435,28.149911]],[[112.941418,28.149527],[112.941418,28.149082]],[[112.941775,28.149527],[112.941775,28.149082]],[[112.941429,28.148947],[112.941429,28.14879]],[[112.94177,28.148947],[112.94177,28.14879]]],anchors=["middle-right","middle-left","middle-right","middle-left","middle-right"],positions=[[112.941005,28.150022],[112.942435,28.150009],[112.941419,28.149374],[112.94177,28.149371],[112.941426,28.148879],[112.94177,28.148919]],texts=["A201<br>B211","A211<br>B219","B203<br>C205","B204<br>C206","C205<br>D北1门上空","C206D<br>D北2门上空"];for(i=0;i<path.length;i++){let polyline=new AMap.Polyline({path:path[i],isOutline:!0,outlineColor:"#fff59d",borderWeight:1,strokeColor:"#f9a825",strokeOpacity:1,strokeWeight:6,strokeStyle:"solid",strokeDasharray:[10,5],lineJoin:"round",lineCap:"round",zIndex:50});polylines.push(polyline);let text=new AMap.Text({text:texts[i],anchor:anchors[i],cursor:"pointer",style:{"border-radius":".25rem","background-color":"rgba(0, 0, 0, 0.50)","border-width":0,"box-shadow":"0 2px 6px 0 rgba(249, 168, 37, .5)","text-align":"left","font-size":"10px",color:"#f9a825"},position:positions[i]});polylines.push(text)}window.overlayGroupsCorridor=new AMap.OverlayGroup(polylines)}function CreateFloorMap(){for(i=1;i<=3;i++){let imageLayer=new AMap.ImageLayer({bounds:new AMap.Bounds([112.940575,28.147995],[112.94279,28.148815]),opacity:1,url:cdn+"/medias/mapsource/d"+i+"f.png",zIndex:1,zooms:[17,20]});eval("window.overlayGroupsDFloor"+i+" = new AMap.OverlayGroup([imageLayer])")}let imageLayer=new AMap.ImageLayer({bounds:new AMap.Bounds([112.940544,28.148815],[112.94274,28.14925]),opacity:.8,url:cdn+"/medias/mapsource/c2f.png",zIndex:1,zooms:[17,20]});map.add(imageLayer),imageLayer=new AMap.ImageLayer({bounds:new AMap.Bounds([112.940785,28.15006],[112.942575,28.150495]),opacity:.8,url:cdn+"/medias/mapsource/a2f.png",zIndex:1,zooms:[17,20]}),map.add(imageLayer),imageLayer=new AMap.ImageLayer({bounds:new AMap.Bounds([112.94071,28.149495],[112.942685,28.149975]),opacity:.8,url:cdn+"/medias/mapsource/b3f.png",zIndex:1,zooms:[17,20]}),map.add(imageLayer)}function changeDFloor(floor,noMoveToD){map.remove(overlayGroupsDFloor1),map.remove(overlayGroupsDFloor2),map.remove(overlayGroupsDFloor3),eval("map.add(overlayGroupsDFloor"+floor+")"),noMoveToD||map.setZoomAndCenter(19,[112.94159,28.14846])}function menu(){var contextMenu=new AMap.ContextMenu;contextMenu.addItem("复制经纬度",(function(e){console.log("["+contextMenuPositon.lng+","+contextMenuPositon.lat+"]"),copyText("["+contextMenuPositon.lng+","+contextMenuPositon.lat+"]"),contextMenu.close()}),0),map.on("rightclick",(function(e){contextMenu.open(map,e.lnglat),contextMenuPositon=e.lnglat}))}function handleInput(){let str=$("#sb1").val().toLowerCase();if("aed"==str)return void aed();let abcd=str.substring(0,1),end=parseInt(str.substring(2,4)),floor=parseInt(str.substring(1,2));switch(abcd){case"a":ARouteDraw(end);break;case"b":BRouteDraw(end);break;case"c":CRouteDraw(end);break;case"d":DRouteDraw(end,floor);break;default:Toast2.fire("尚不支持","","error")}}function ARouteDraw(num){let doornum,illegal=!1;switch(num){case 1:case 2:case 3:doornum=3;break;case 4:case 5:case 6:case 23:case 24:doornum=4;break;case 22:case 21:case 20:case 19:case 18:case 7:case 8:case 17:case 9:doornum=0;break;case 10:case 11:case 12:case 13:case 14:case 15:doornum=1;break;default:Toast2.fire("输入内容不合法","","error"),illegal=!0}illegal||showAndDrawRoute(pointsA[doornum],textA[doornum])}function BRouteDraw(num){let doornum,illegal=!1;if(num>=10&&num<=13)doornum=1;else if(num>=7&&num<=9)doornum=2;else if(num>=2&&num<=6||num>=14&&num<=18)doornum=0;else switch(num){case 19:case 20:doornum=6;break;case 1:doornum=5;break;default:Toast2.fire("输入内容不合法","","error"),illegal=!0}illegal||showAndDrawRoute(pointsB[doornum],textB[doornum])}function CRouteDraw(num){let doornum,illegal=!1;num>=1&&num<=3?doornum=0:num>=4&&num<=7?doornum=1:num>=8&&num<=10?doornum=2:num>=11&&num<=13?doornum=3:illegal=!0,illegal||showAndDrawRoute(pointsC[doornum],textC[doornum])}function DRouteDraw(room,floor){let doornum,illegal=!1,finalpoint=[];switch(floor){case 1:switch(room){case 1:doornum=9;break;case 3:case 4:doornum=5;break;case 28:case 29:case 30:doornum=7;break;case 6:case 7:case 23:doornum=2;break;case 25:case 27:doornum=0;break;case 20:case 21:case 22:doornum=6;break;case 16:case 17:doornum=7;break;case 13:case 14:doornum=4;break;case 8:case 10:doornum=3;break;default:illegal=!0}break;case 2:switch(room){case 2:case 3:case 4:doornum=8;break;case 5:case 12:case 14:doornum=0;break;case 6:case 10:doornum=6;break;case 7:case 9:doornum=7;break;default:illegal=!0}break;case 3:doornum=1;break;default:illegal=!0}illegal?Toast2.fire("输入内容不合法","","error"):showAndDrawRoute(pointsD[doornum],textD[doornum])}function showAndDrawRoute(point,text){if(removeAll(),$("#result").html("<b style='color:var(--bgcolor);font-size:larger'>"+text+"</b>"),mylocationresult[0])RidePlan(current,point,text);else{var endMarker=new AMap.Marker({position:point,icon:"https://webapi.amap.com/theme/v1.3/markers/n/end.png",offset:new AMap.Pixel(-13,-30),map:map});endMarker.setLabel({content:"<div class='mapdoor'>"+text+"</div>",direction:"right"}),removeAll(),endMarker.setMap(map),map.setZoomAndCenter(19,point)}OpenInAPPEdit(point[0],point[1],text)}function OpenInAPPEdit(lng,lat,text){OpenInAPP[0]=lng,OpenInAPP[1]=lat,OpenInAPP[2]=text,$("#app").removeClass("disabled")}function RidePlan(fromWhere,toWhere,endlabel){var ridingOption={policy:1},riding;function drawRoute(route){var path=parseRouteToPath(route),startMarker=new AMap.Marker({position:path[0],icon:"https://webapi.amap.com/theme/v1.3/markers/n/start.png",map:map}),endMarker=new AMap.Marker({position:path[path.length-1],icon:"https://webapi.amap.com/theme/v1.3/markers/n/end.png",offset:new AMap.Pixel(-13,-30),map:map});endMarker.setLabel({content:"<div class='mapdoor'>"+endlabel+"</div>",direction:"right"});var routeLine=new AMap.Polyline({path:path,isOutline:!1,strokeWeight:8,strokeColor:"#039be5",strokeOpacity:.8,lineJoin:"round",lineCap:"round",showDir:!0});routeLine.setMap(map),map.setFitView([startMarker,endMarker,routeLine],!1,avoid)}function parseRouteToPath(route){for(var path=[],i=0,l=route.rides.length;i<l;i++)for(var step=route.rides[i],j=0,n=step.path.length;j<n;j++)path.push(step.path[j]);return path}map.clearMap(),new AMap.Riding(ridingOption).search(fromWhere,toWhere,(function(status,result){"complete"===status?result.routes&&result.routes.length&&(drawRoute(result.routes[0]),Toast.fire("绘制骑行路线完成","","success")):Toast.fire('骑行路线绘制失败，但您仍可点击"在APP内打开"查看',result,"warning")}))}function mylocation(){function onComplete(data){current=[data.position.lng,data.position.lat],Toast.fire("定位成功","","success"),mylocationresult=[!0,data.location_type,data.accuracy],firstopen()}function onError(data){let message=data.message.replace(/Geolocation permission denied\./g,"未授予定位权限！");message=message.replace(/Get ipLocation failed\./g,"IP定位失败！"),message=message.replace(/Get geolocation time out\./g,"定位超时！"),Toast2.fire("定位失败",message,"warning"),mylocationresult=[!1,message],firstopen()}AMap.plugin("AMap.Geolocation",(function(){var geolocation=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonPosition:"RB",buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!1});map.addControl(geolocation),geolocation.getCurrentPosition((function(status,result){"complete"==status?onComplete(result):onError(result)}))}))}function firstopen(){1!=$.cookie("tutorial")&&($.cookie("tutorial","1",{expires:366}),tutorial())}function refresh(){removeAll(),addOverlay("A"),addOverlay("B"),addOverlay("C"),addOverlay("D"),addOverlay("WC"),changeDFloor("1",!0),map.setFitView(null,!1,avoid)}function isMobile(){let userAgentInfo=navigator.userAgent,mobileAgents=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],mobile_flag=!1;for(let v=0;v<mobileAgents.length;v++)if(userAgentInfo.indexOf(mobileAgents[v])>0){mobile_flag=!0;break}let screen_width=window.screen.width,screen_height=window.screen.height;return screen_width<500&&screen_height<800&&(mobile_flag=!0),mobile_flag}function removeAll(){removeOverlay("A"),removeOverlay("B"),removeOverlay("WC"),removeOverlay("C"),removeOverlay("D"),removeOverlay("Water"),removeOverlay("StudyRoom"),removeOverlay("Corridor"),removeOverlay("Train"),$("#result").html("输入房号或点击地点"),$("#app").addClass("disabled"),map.clearMap()}function toggleSet(buildingName){eval("if($('#Checkbox"+buildingName+"').is(':checked')) {addOverlay('"+buildingName+"');} else {removeOverlay('"+buildingName+"');}"),map.setFitView(null,!1,avoid)}async function note(){const{value:formValues}=await Swal.fire({title:"记录单车位置",html:'<div class="swal2info" id="swal2info1"><i class="fas fa-info-circle"></i> 彻底关闭浏览器，再次打开本页面，仍能点击  <button class="notipt" onclick="readnote()" style="border-radius:0px 30px 30px 0px;width:40px;margin: 0 0;"><text><i class="fas fa-eye"></i></text></button> 仍能查看。</div><div class="file-field input-field"><div class="btn"><span><i class="far fa-dot-circle"></i> 拍照</span><input type="file"id="photo"type="file"accept="image/*"capture="camera"οnchange="yulanfunc()"></div><div class="file-path-wrapper"><input class="file-path validate"type="text"></div></div><div class="input-field col s6"><input id="swal-input2" type="text" class="validate swal2-input" style="max-width:95%"><label for="swal-input2">【选填】文字备忘：附近标志物？</label></div><img id="yulan" class="smallpic"/>',focusConfirm:!1,showCloseButton:!0,confirmButtonText:'<i class="far fa-save"></i> 保存',preConfirm:()=>[document.getElementById("photo").files[0],document.getElementById("swal-input2").value]});formValues&&(localStorage.setItem("notetext",formValues[1]),SaveTextAndBase64(formValues[0]))}function SaveTextAndBase64(file){if(window.FileReader&&file)try{var reader=new FileReader;reader.readAsDataURL(file),reader.onloadend=function(e){var base64String=e.target.result;localStorage.setItem("notepicbase64",base64String)},Swal.fire({icon:"success",title:"保存成功",html:"<br/><img class='smallpic' src='"+localStorage.getItem("notepicbase64")+"'/><br/>"+localStorage.getItem("notetext"),timer:1200,showConfirmButton:!1})}catch(err){Swal.fire({icon:"warning",title:"图片保存失败",html:"如无意外，<b>文字保存成功。</b><br/>请尝试压缩图片大小。<br>失败原因："+err.message})}else Toast2.fire({icon:"warning",title:"文字保存成功",html:"你没有上传图片"})}function readnote(){Swal.fire({title:localStorage.getItem("notetext")?localStorage.getItem("notetext"):"没有文本描述",imageUrl:localStorage.getItem("notepicbase64")})}function official(){Swal.fire({title:"中南E行",html:'<div class="swiper"><div class="swiper-wrapper"><div class="swiper-slide"><div class="collection"><a href="http://ecard.csu.edu.cn:8070/InfoPub/CardNotice/NFixCardList?needHeader=true"class="collection-item">📢 拾卡通知</a><a href="http://classroom.csu.edu.cn:8082/index.html#/"class="collection-item">✅ 签到系统</a><a href="http://ecard.csu.edu.cn:8070/AutoPay/PowerFee"class="collection-item">⚡️ 电费充值</a><a href="http://ecard.csu.edu.cn:8070/AutoPay/PowerFee/PList"class="collection-item">⚡️ 电费充值记录</a><a href="http://app.its.csu.edu.cn/csu-app/cgi-bin/depa/depa"class="collection-item">🚌 班车信息</a></div></div><div class="swiper-slide"><div class="collection"><a href="http://libzw.csu.edu.cn/home/web/f_second"class="collection-item">🪑 图书馆座位预约</a><a href="http://opac.its.csu.edu.cn/MylibIndex.aspx"class="collection-item">📖 图书馆借还书</a><a href="http://tz.its.csu.edu.cn/Home/Release_TZTG"class="collection-item">🔔 校内通知</a><a href="http://csujwc.its.csu.edu.cn/"class="collection-item">🌍 教务管理系统</a><a href="http://my.csu.edu.cn/portal/index.jsp"class="collection-item">🌍 信息门户</a></div></div><div class="swiper-slide"><div class="collection"><a href="http://202.197.71.136/jpkc/"class="collection-item">中南数苑</a><a href="https://onlineh5.zhihuishu.com/onlineWeb.html#/studentIndex"class="collection-item">知到(智慧树)</a><a href="https://sso.sflep.com/cas/login?service=http%3a%2f%2fwelearn.sflep.com%2fuser%2floginredirect.aspx"class="collection-item">WE Learn</a><a href="https://www.icourse163.org/spoc/university/CSU"class="collection-item">中国大学MOOC</a><a href="https://www.yuketang.cn/v2/web/studentLog"class="collection-item">雨课堂</a></div></div></div><div class="swiper-button-prev"></div><div class="swiper-button-next"></div></div>',confirmButtonText:"关闭",allowOutsideClick:!1});var mySwiper=new Swiper(".swiper",{navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}function nearest(array){let x=current[0],y=current[1],distance=Math.pow(array[0][0]-x,2)+Math.pow(array[0][1]-y,2),t;for(i=1;i<array.length;i++)t=Math.pow(array[i][0]-x,2)+Math.pow(array[i][1]-y,2),t<distance&&(x=array[i][0],y=array[i][1],distance=t);return[x,y]}function copyText(text,callback){var tag=document.createElement("input");tag.setAttribute("id","cp_input"),tag.value=text,document.getElementsByTagName("body")[0].appendChild(tag),document.getElementById("cp_input").select(),document.execCommand("copy"),document.getElementById("cp_input").remove(),callback&&callback(text)}function aed(){Swal.fire({icon:"warning",title:"AED除颤仪数据缺失",showCancelButton:!0,showConfirmButton:!0,showCloseButton:!0,reverseButtons:!0,confirmButtonText:"了解AED",cancelButtonText:"好",html:'<p style="text-align: left;line-height: 1.5em;">心源性猝死离我们并不遥远。AED（自动体外除颤仪）被称为应对突发心脏骤停的“救命神器”，近年来，<b>给公共场所配备AED设备已为舆论多番呼吁。</b></p><p style="text-align: left;line-height: 1.5em;">发达国家已经普及AED，如日本、德国、新加坡等国家，在地铁站、酒店大堂等公共空间广泛配备AED。2019年，清华大学增设341台AED；2021年，南京大学增设150台AED，北师大增设20台。</p>'}).then(result=>{result.value&&window.open("https://www.zhihu.com/question/317438113/answer/767028136")}),$("#CheckboxAED").prop("checked",!1)}function nearestPoint(point,array){if(1==array.length)return array[0];let distance=AMap.GeometryUtil.distance(point,array[0]),t,result=array[0];for(i=1;i<array.length;i++)t=AMap.GeometryUtil.distance(point,array[i]),t<distance&&(distance=t,result=array[i]);return result}$("#app").click((function(){isMobile()?window.open("amapuri://route/plan/?dlon="+OpenInAPP[0]+"&dlat="+OpenInAPP[1]+"&dname="+OpenInAPP[2]+"&dev=0&t=3"):window.open("http://uri.amap.com/navigation?from="+current[0]+",+"+current[1]+",我的位置(不精确)&to="+OpenInAPP[0]+",+"+OpenInAPP[1]+","+OpenInAPP[2]+"&mode=walk&src=lzc2002.com")})),window.tutorial=async()=>{const steps=[1,2,3,4,5,6,7,8],swalQueueStep=Swal.mixin({confirmButtonText:"下一步",cancelButtonText:"上一步",progressSteps:steps,reverseButtons:!0,customClass:{confirmButton:"confirmButton",cancelButton:"cancelButton"},allowOutsideClick:!1,showCloseButton:!0,closeButtonHtml:"跳过"});let currentStep,ttrtitle=["欢迎使用CSU教室导航",mylocationresult[0]?"获取定位成功":"获取定位失败","多骑两下，少走一段","输入，完成！","门、楼梯与电梯","是懒，也是<span style='color:var(--bgcolor)'>安全</span>","More Worthwhile","让我们开始吧！"],ttrhtml=["该教程将引导你使用，预计30s通过。",mylocationresult[0]?"定位方式："+mylocationresult[1]+"<br/>定位精度："+mylocationresult[2]+"m":"但您仍可使用规划服务。<br/>失败原因："+mylocationresult[1],"众所周知，ABCD座有很多门。该系统可以<span style='color:var(--bgcolor)'>显示离课室最近的门</span>，你可以骑车至此处。",'在左上角输入课室房号，格式：如<input type="text" value="A315" style="margin: 0"></input><br/>点击<input type="button" value="生成"/>即可完成规划，<br/>点击<input type="button" value="在高德APP内导航"/>可以跳转高德地图APP内导航。',"一般而言，有门的地方就有楼梯。进门后直接上楼梯，是最近的道路。<br/><br/>电梯都在楼栋进门位置处。","了解离课室最近的楼梯，减少正门楼梯的拥堵，安全防疫。<br/><br/>此外，方便您在遇到紧急情况(如火灾、地震)时，快速找到下楼逃生通道。","目前的功能仅限<span style='color:var(--bgcolor)'>查找最近的门</span>和<span style='color:var(--bgcolor)'>拍照记录</span>，我们希望在日后利用该功能做更有意义的事情，比如<span style='color:var(--bgcolor)'>导航至最近的AED除颤仪</span>等。<br/><br/>如果你能为我们提供帮助，欢迎联系我们。"],ttricon=[,mylocationresult[0]?"success":"warning"];for(currentStep=0;currentStep<steps.length;){const result=await swalQueueStep.fire({title:ttrtitle[currentStep],html:ttrhtml[currentStep],icon:ttricon[currentStep],showCancelButton:currentStep>0,currentProgressStep:currentStep});if(result.value)currentStep++;else{if(result.dismiss!==Swal.DismissReason.cancel)break;currentStep--}currentStep===steps.length&&Swal.fire(JSON.stringify(values))}};